<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Boostcom Performance Cloud API V3 Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="../../stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="../../stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="../../javascripts/all.js"></script>
  </head>

  <body class="bl-api bl-api_v3 bl-api_v3_index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a href="/">
        <img src="../../images/logo.svg" alt="Logo" />
      </a>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://loyalty.boostcom.no'>Performance Cloud</a></li>
            <li><a href='http://boostcom.com/'>Boostcom</a></li>
            <li><hr/></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<p>It&rsquo;s an API to manage loyalty club&rsquo;s members.
It can be accessed from both Boostcom&rsquo;s internal server applications, from native mobile applications as well as external client&rsquo;s server applications.</p>

          <h1 id="general-info">General info</h1>

<h2 id="hosts">Hosts</h2>

<p>Production: <a href="https://bpc-api.boostcom.no">https://bpc-api.boostcom.no</a></p>

<p>Production (APAC region): <a href="https://bpc-api.apac.boostcom.com">https://bpc-api.apac.boostcom.com</a></p>

<p>Staging: <a href="https://bpc-api.dev.boostcom.no">https://bpc-api.dev.boostcom.no</a></p>

<h2 id="common-http-error-codes">Common HTTP error codes</h2>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">400</code></td>
<td>Some of required header is missing</td>
</tr>
<tr>
<td><code class="prettyprint">401</code></td>
<td><code class="prettyprint">X-Client-Authorization</code> is invalid (or doesn&rsquo;t match provided loyalty club or product)</td>
</tr>
<tr>
<td><code class="prettyprint">403</code></td>
<td>Not authorized to perform this action (provided <code class="prettyprint">X-Authorization-Token</code> doesn&rsquo;t have required permit)</td>
</tr>
<tr>
<td><code class="prettyprint">404</code></td>
<td>The requested resource doesn&rsquo;t exist</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters are provided (e.g. incorrect properties on member creation)</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>OAuth token required for the action is invalid (applies only to OAuth-related actions - see <a href="#v3-oauth2">OAuth2</a>)</td>
</tr>
</tbody></table>

<p>Also, most of handled errors have JSON response body like this:</p>

<p><code class="prettyprint">{&quot;error&quot;: &quot;Message describing what went wrong&quot;}</code></p>

<h2 id="validation-on-members">Validation on members</h2>

<p>All members&rsquo; endpoints have properties validation. Properties are validated to conform loyalty club&rsquo;s schema.</p>

<p>If something is wrong, you will receive explanation of errors in response.</p>

<aside class="warning">
Errors format and strings are not yet stable and may change without further notice.
</aside>

<h3 id="schema-validation-errors">Schema validation errors</h3>
<pre class="highlight shell tab-shell"><code>curl -X PUT -H <span class="s2">"X-Product-Name: custom-product-name"</span> <span class="se">\</span>
    -H <span class="s2">"X-Customer-Private-Token: token"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> -d <span class="s1">'{
    "properties": {
        "first_name": "",
        "last_name": "err",
        "gender": "man",
        "birthday": "201X-01-01"
    }
}'</span> <span class="s2">"https://tbp.bstcm.no/api/v2/loyalty_clubs/:loyalty_club_slug/members/:msisdn"</span>
</code></pre>
<blockquote>
<p>Example response (with code 400):</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_not_match"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"een"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en, no"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"language"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"optin_channel"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_contain_required_property"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optin_channel"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Error</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invalid_date_format</td>
<td>Invalid date format</td>
</tr>
<tr>
<td>invalid_time_format</td>
<td>Invalid time format</td>
</tr>
<tr>
<td>invalid_date_time_format</td>
<td>Invalid date with time format</td>
</tr>
<tr>
<td>must_be_valid_RFC3339_date_time_string</td>
<td>Format beyond the RFC3339 standard</td>
</tr>
<tr>
<td>invalid_URI</td>
<td>Invalid URI</td>
</tr>
<tr>
<td>additional_array_elements</td>
<td>Additional elements in the array</td>
</tr>
<tr>
<td>additional_properties</td>
<td>Additional properties</td>
</tr>
<tr>
<td>property_not_match_all_of</td>
<td>The property did not match all of the required schemas</td>
</tr>
<tr>
<td>property_not_match_any_of</td>
<td>The property did not match any of the required schema</td>
</tr>
<tr>
<td>property_matched_more_than_one</td>
<td>The property matched more than one of the required schemas</td>
</tr>
<tr>
<td>depends_on_a_missing_property</td>
<td>The validated property has a property that depends on the other missing property</td>
</tr>
<tr>
<td>value_not_match</td>
<td>The property value did not match one of the given values.</td>
</tr>
<tr>
<td>schema_cannot_be_found</td>
<td>The extended schema cannot be found</td>
</tr>
<tr>
<td>not_a_valid_schema</td>
<td>The property was not a valid schema</td>
</tr>
<tr>
<td>minimum_string_length</td>
<td>The property was not of a minimum string length of minimum limit.</td>
</tr>
<tr>
<td>maximum_string_length</td>
<td>The property was not of a maximum string length of maximum limit.</td>
</tr>
<tr>
<td>less_item_than_minimum</td>
<td>The property did not contain a minimum number of minimum items limit</td>
</tr>
<tr>
<td>more_item_than_maximum</td>
<td>The property had more items than the allowed items limit</td>
</tr>
<tr>
<td>less_properties_than_minimum</td>
<td>The property did not contain a minimum number of properties</td>
</tr>
<tr>
<td>more_properties_than_maximum</td>
<td>The property had more properties than allowed</td>
</tr>
<tr>
<td>not_have_value_of_exclusively</td>
<td>The property did not have value of exclusively</td>
</tr>
<tr>
<td>not_have_value_of_inclusively</td>
<td>The property did not have value of inclusively</td>
</tr>
<tr>
<td>more_decimal_places_than_maximum</td>
<td>The property had more decimal places than the allowed maximum</td>
</tr>
<tr>
<td>matched_the_disallowed_schema</td>
<td>The property matched the disallowed schema</td>
</tr>
<tr>
<td>the_regex_not_match</td>
<td>The property did not match the regex</td>
</tr>
<tr>
<td>not_contain_required_property</td>
<td>The validated property did not contain a required property</td>
</tr>
<tr>
<td>contained_undefined_properties</td>
<td>The validated property contained undefined properties</td>
</tr>
<tr>
<td>referenced_schema_cannot_be_found</td>
<td>The referenced schema cannot be found</td>
</tr>
<tr>
<td>invalid_schema</td>
<td>The property was not a valid schema</td>
</tr>
<tr>
<td>matched_one_or_more_types</td>
<td>The property matched one or more of the given types</td>
</tr>
<tr>
<td>one_or_more_types_not_match</td>
<td>The property did not match one or more of the given types</td>
</tr>
<tr>
<td>type_not_match</td>
<td>The property did not match the given type</td>
</tr>
<tr>
<td>contained_duplicated_array_values</td>
<td>The property contained duplicated array values</td>
</tr>
<tr>
<td>invalid_email</td>
<td>Invalid email format</td>
</tr>
<tr>
<td>invalid_mx</td>
<td>Invalid (inaccessible) email domain</td>
</tr>
<tr>
<td>disposable_email</td>
<td>The email was <a href="https://github.com/lisinge/valid_email2/blob/master/vendor/disposable_emails.yml">disposable</a></td>
</tr>
<tr>
<td>duplicated_email</td>
<td>The email was duplicated in community</td>
</tr>
</tbody></table>

<h2 id="member-json-model"><a name="v3-member-model"></a> Member JSON model</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ola"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nordmann"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1990-10-23"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"bikes_and_cars"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sportwear"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"child_birth_years"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mi">2010</span><span class="p">,</span><span class="w">
      </span><span class="mi">2011</span><span class="p">,</span><span class="w">
      </span><span class="mi">2011</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"consents"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"consent1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-14T21:57:20.063Z"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"consent2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T21:57:43.738Z"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"sms_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hard_bounced"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"push_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"disabled"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"optin_channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webforms"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"optin_subchannel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campaign-10-2017"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-01-19T10:07:08.336+01:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-03T09:35:19.313+02:00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">99</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Standard member JSON model returned from many API endpoints.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Member ID</td>
<td>integer</td>
</tr>
<tr>
<td>properties</td>
<td>Object with member&rsquo;s properties</td>
<td>JSON Object</td>
</tr>
<tr>
<td>properties[&lsquo;language&rsquo;]</td>
<td>Language used by user</td>
<td>string</td>
</tr>
<tr>
<td>consents</td>
<td>Member&rsquo;s consents JSON model (see below)</td>
<td>JSON Object</td>
</tr>
<tr>
<td>sms_status</td>
<td>Status of sms channel</td>
<td>string</td>
</tr>
<tr>
<td>email_status</td>
<td>Status of email channel</td>
<td>string</td>
</tr>
<tr>
<td>push_status</td>
<td>Status of push channel</td>
<td>string</td>
</tr>
<tr>
<td>optin_channel</td>
<td>Channel (<code class="prettyprint">X-Product-Name</code> header) which had been used to register member</td>
<td>string</td>
</tr>
<tr>
<td>optin_subchannel</td>
<td>Subchannel (<code class="prettyprint">X-Subproduct-Name</code> header) which had been used to register member</td>
<td>string</td>
</tr>
<tr>
<td>created_at</td>
<td>Time when the user was firstly created</td>
<td>string</td>
</tr>
<tr>
<td>updated_at</td>
<td>Time when the user was last updated</td>
<td>string</td>
</tr>
<tr>
<td>person_id</td>
<td>Unique Member&rsquo;s identifier (set internally)</td>
<td>string</td>
</tr>
</tbody></table>

<h2 id="members-consents-json-model"><a name="v3-member-consents-model"></a> Member&rsquo;s consents JSON model</h2>

<p>JSON model for consents. Keys can be dynamically created based on customer&rsquo;s need.</p>

<p>It consists of: <code class="prettyprint">&#39;consent-slug&#39;: { &quot;status&quot;: &lt;boolean_value&gt;, &quot;updated_at&quot;: &lt;time&gt; }</code></p>

<ul>
<li>If status is <code class="prettyprint">true</code> - Member approved consent.</li>
<li>If status is <code class="prettyprint">false</code> - Member disapproved consent.</li>
<li>If you can&rsquo;t find slug on Member: he/she haven&rsquo;t disapproved or approved consent.</li>
</ul>

<p><code class="prettyprint">updated_at</code> is the time of last consent update. It can be also not provided or null.</p>

<p>Available consents for Loyalty Club are described in <a href="#v3-loyalty-clubs-schema">schema</a>.</p>

<h2 id="pagination-json-model"><a name="v3-pagination-model"></a> Pagination JSON model</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2050</span><span class="p">,</span><span class="w">
    </span><span class="s2">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prev_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_first_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_last_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_out_of_range"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Used to present information about paginated pages</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>total_count</td>
<td>integer</td>
<td>Number of all available results</td>
</tr>
<tr>
<td>per_page</td>
<td>integer</td>
<td>Number of results returned per request</td>
</tr>
<tr>
<td>total_pages</td>
<td>integer</td>
<td>Number of all available pages</td>
</tr>
<tr>
<td>current_page</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>next_page</td>
<td>integer</td>
<td>Next available page (<code class="prettyprint">null</code> when it&rsquo;s a last page)</td>
</tr>
<tr>
<td>prev_page</td>
<td>integer</td>
<td>Previous available page (<code class="prettyprint">null</code> when it&rsquo;s a first page)</td>
</tr>
<tr>
<td>is_first_page</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>is_last_page</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>is_out_of_range</td>
<td>boolean</td>
<td>Is given <code class="prettyprint">per_page</code> param out of range?</td>
</tr>
</tbody></table>

<h2 id="file-model"><a name="v3-file-model"></a> File model</h2>

<p>Every file attached to some entity (Offer, Reward, Offer Collection) follows the file schema and is defined like this:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>URL</td>
<td>Link to the file</td>
</tr>
<tr>
<td>width</td>
<td>integer</td>
<td>Image width</td>
</tr>
<tr>
<td>height</td>
<td>integer</td>
<td>Image height</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>File kind identifier (e.x. <code class="prettyprint">offer_default</code>), see <a href="#v3-file-kinds">Standard file kinds</a></td>
</tr>
<tr>
<td>size_type</td>
<td>string</td>
<td>e.x. <code class="prettyprint">base</code>, see: <a href="#v3-file-sizes">File sizes</a></td>
</tr>
</tbody></table>

<h2 id="file-schema"><a name="v3-file-schema"></a> File schema</h2>

<p>File schema defines a list of files kinds available in the Loyalty club. 
Each file kind is also available in multiple sizes. </p>

<p>The schema may get retrieved with <a href="#v3-get-file-schema">Files&bull; Get schema</a> endpoint.</p>

<blockquote>
<p>Example loyalty club file schema</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"files_kinds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection_cover_default"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMAGE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2:1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offer_default"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMAGE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3:4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_default"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMAGE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3:4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_without_ratio"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMAGE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="file-kind-model"><a name="v3-file-kind-model"></a> File kind model</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>identifier</td>
<td>string</td>
<td>See: <a href="#v3-file-kinds">Standard file kinds</a></td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Currently, only <code class="prettyprint">IMAGE</code> (MIME: <code class="prettyprint">image/gif</code>, <code class="prettyprint">image/jpeg</code>, <code class="prettyprint">image/png</code>) is supported</td>
</tr>
<tr>
<td>ratio</td>
<td>string</td>
<td>Describes ratio of an image. See: <a href="#v3-file-kind-ratio">Ratio</a> (optional)</td>
</tr>
<tr>
<td>sizes</td>
<td>Array<Object></td>
<td>See: <a href="#v3-file-sizes">File sizes</a></td>
</tr>
<tr>
<td>sizes[][&lsquo;identifier&rsquo;]</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>sizes[][&lsquo;min_width&rsquo;]</td>
<td>integer</td>
<td>(optional)</td>
</tr>
<tr>
<td>sizes[][&lsquo;min_height&rsquo;]</td>
<td>integer</td>
<td>(optional)</td>
</tr>
<tr>
<td>sizes[][&lsquo;max_width&rsquo;]</td>
<td>integer</td>
<td>(optional)</td>
</tr>
<tr>
<td>sizes[][&lsquo;max_height&rsquo;]</td>
<td>integer</td>
<td>(optional)</td>
</tr>
</tbody></table>

<h3 id="standard-file-kinds"><a name="v3-file-kinds"></a> Standard file kinds</h3>

<p>There are some standard file kinds, their size definitions differ among Loyalty Clubs.</p>

<table><thead>
<tr>
<th>Identifier</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">collection_cover_default</code></td>
<td>Cover for Offer collections</td>
</tr>
<tr>
<td><code class="prettyprint">offer_default</code></td>
<td>Default Offer image</td>
</tr>
<tr>
<td><code class="prettyprint">reward_default</code></td>
<td>Default Reward image</td>
</tr>
</tbody></table>

<h3 id="ratio"><a name="v3-file-kind-ratio"></a> Ratio</h3>

<p>Images may have fixed proportions ratio which is represented as a string: <code class="prettyprint">&quot;&lt;width&gt;:&lt;height&gt;&quot;</code></p>

<h3 id="file-sizes"><a name="v3-file-sizes"></a> File sizes</h3>

<p>Every file has at least three file sizes available: </p>

<h4 id="base"><code class="prettyprint">base</code></h4>

<p>Actual file size. Currently all file kinds have this size with fixed proportions (so <code class="prettyprint">min_*</code> == <code class="prettyprint">max_*</code>) that match the ratio.</p>

<h4 id="thumbnail"><code class="prettyprint">thumbnail</code></h4>

<p>Rescaled version of <code class="prettyprint">base</code> size. Currently, rescaling always works this way:</p>

<ul>
<li>pick the higher dimension of file</li>
<li>shrink the image so:

<ul>
<li>the higher dimension gets shrunk to <code class="prettyprint">300px</code></li>
<li>the lower dimensions gets shrunk so the image keeps the original ratio</li>
</ul></li>
</ul>

<p>Examples:</p>

<ul>
<li>File with resolution <code class="prettyprint">600x800</code> gets shrunk down to <code class="prettyprint">225x300</code></li>
<li>File with resolution <code class="prettyprint">800x600</code> gets shrunk down to <code class="prettyprint">300x225</code></li>
<li>File with resolution <code class="prettyprint">400x300</code> gets shrunk down to <code class="prettyprint">300x225</code></li>
<li>File with resolution <code class="prettyprint">400x200</code> gets shrunk down to <code class="prettyprint">300x150</code></li>
<li>File with resolution <code class="prettyprint">300x250</code> is not shrunk down</li>
</ul>

<h4 id="original"><code class="prettyprint">original</code></h4>

<p>Original file that that has been uploaded and used for generating other file sizes.</p>

<p>Currently, we require all original files to have proper ratios and minimum sizes of at least the <code class="prettyprint">base</code> size.
Because of that, you can expect them to have <code class="prettyprint">min_height</code> and <code class="prettyprint">min_width</code> that match the <code class="prettyprint">base</code> size, 
but they never have <code class="prettyprint">max_width</code> or <code class="prettyprint">max_height</code> defined.</p>

          <h1 id="common-params-and-headers">Common params and headers</h1>

<h2 id="content-type-header">Content-Type header</h2>

<p>This API supports <code class="prettyprint">application/json</code> only. </p>

<p>Both payload and response body are supposed to be a valid JSON so when making a request send a <code class="prettyprint">Content-Type: application/json</code> header.</p>

<p>If payload is not a valid JSON, then <code class="prettyprint">406 Not Acceptable</code> HTTP code and empty response body are returned.</p>

<h2 id="x-client-authorization-header">X-Client-Authorization header</h2>

<blockquote>
<p>Example header: <code class="prettyprint">X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM</code></p>
</blockquote>

<p>All of the endpoints <strong>require</strong> a client authorization header - <code class="prettyprint">X-Client-Authorization</code>.</p>

<p>It should be used only on backend and never exposed in frontend code.</p>

<p>Each token has are permits assigned to it. Depending what permits are assigned, access to some of the endpoints
may be restricted.</p>

<p>If you miss your authentication token, please <a href="http://boostcom.no">let us know</a>.</p>

<h2 id="x-user-agent-header">X-User-Agent header</h2>

<blockquote>
<p>Example header: <code class="prettyprint">X-User-Agent: Infinity Mall Android App</code></p>
</blockquote>

<p><code class="prettyprint">X-User-Agent</code> is <strong>required</strong> to distinguish specific client for information and debugging purposes so we better know who uses the service.</p>

<p>It should be arbitrarily chosen to represent client specifics (e.g. &lsquo;Infinity Mall Android App v1.2&rsquo; or &lsquo;Infinity Mall Backend Service&rsquo;)</p>

<h2 id="x-product-name-header">X-Product-Name header</h2>

<blockquote>
<p>Example header: <code class="prettyprint">X-Product-Name: android-app</code></p>
</blockquote>

<p>Each system that is communicating with us should uniquely identify itself so it is possible to distinguish optin/update channels.
That will allow further targeting members by communication channel.</p>

<p>For that we use product name. It should be passed as <strong>required</strong> header <code class="prettyprint">X-Product-Name</code> that is intended to provide the necessary granularity.</p>

<p>If you miss your product name, please <a href="http://boostcom.no">let us know</a>.</p>

<h2 id="authorization-header">Authorization header</h2>

<blockquote>
<p>Example header: <code class="prettyprint">Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522</code></p>
</blockquote>

<p>See: <a href="#v3-oauth2">OAuth2</a></p>

<h2 id="loyalty-club-slug-param">Loyalty club slug param</h2>

<blockquote>
<p>Example slug: &lsquo;infinity-mall&rsquo;</p>
</blockquote>

<p>As all of the API endpoints work in the context of specific Loyalty Club, they&rsquo;re scoped within it&rsquo;s identifier - <code class="prettyprint">:loyalty_club_slug</code></p>

<p>It&rsquo;s an unique slugified name of the Loyalty Club.</p>

<h2 id="msisdn-param">Msisdn param</h2>

<p>Members in our systems may be identified with their phone numbers (msisdns) according to <a href="https://en.wikipedia.org/wiki/E.164">E.164</a>
We use format without leading <code class="prettyprint">00</code> or <code class="prettyprint">+</code> and without spaces, so that it contains only digits, i.e. <code class="prettyprint">4740485124</code>.</p>

          <h1 id="endpoints-loyalty-clubs">Endpoints &bull; Loyalty Clubs</h1>

<h2 id="get"><a name="v3-loyalty-clubs-get"></a> Get</h2>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/loyalty_clubs/infinity-mall/"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, the above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">235</span><span class="p">,</span><span class="w">
    </span><span class="s2">"community_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3433</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">447</span><span class="p">,</span><span class="w">
    </span><span class="s2">"main_slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"infinity-mall"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"short_slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iml"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"other_slugs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"infinity"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Infinity Mall"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Europe/Oslo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"member_identifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"msisdn"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"new_offers_api_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/loyalty_clubs/:loyalty_club_slug</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/loyalty_clubs/by_community_id/:community_id</code></p>

<p>Returns basic information about the Loyalty Club, by one of it&rsquo;s slugs or by it&rsquo;s <code class="prettyprint">community_id</code>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>community_id</td>
<td>integer</td>
<td>ID of community assigned to the Loyalty Club</td>
</tr>
<tr>
<td>customer_id</td>
<td>integer</td>
<td>ID of customer that the Loyalty Club belongs to</td>
</tr>
<tr>
<td>main_slug</td>
<td>slug</td>
<td>Main LC&rsquo;s slug</td>
</tr>
<tr>
<td>short_slug</td>
<td>slug</td>
<td>Short LC&rsquo;s slug, used in Boostcom Shortener</td>
</tr>
<tr>
<td>other_slugs</td>
<td>array<string></td>
<td>May be empty</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td><a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">ISO 3166-1 alpha-2 code</a></td>
</tr>
<tr>
<td>timezone</td>
<td>string</td>
<td><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">TZ database name</a></td>
</tr>
<tr>
<td>member_identifiers</td>
<td>array<string></td>
<td>May consist of following values: <code class="prettyprint">msisdn</code> and <code class="prettyprint">email</code></td>
</tr>
<tr>
<td>new_offers_api_enabled</td>
<td>bool</td>
<td>Is <a href="#endpoints-offers">New Offers API</a> enabled for this Loyalty Club?</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:LoyaltyClubs:Get</code> permit
</aside>

<h2 id="get-schema"><a name="v3-loyalty-clubs-schema"></a> Get schema</h2>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/member_schema"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, the above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"email"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"consents"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"consent1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="s2">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="s2">"show_in_profile"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="s2">"show_at_registration"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"consent2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="s2">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="s2">"show_in_profile"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="s2">"show_at_registration"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"languages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"en"</span><span class="p">,</span><span class="w"> </span><span class="s2">"no"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"default_language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"interests"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"enum"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"bikes_and_cars"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"sportwear"</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"required"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"birthday"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/member_schema</code></p>

<p>Properties for members are defined as part of the loyalty club they belong to.</p>

<p>To describe member properties we use <a href="http://json-schema.org/documentation.html">JSON Schema</a> definition.
Properties of each member must conform to the defined schema.</p>

<p>We support <strong>JSON schema Draft V4</strong> with format extension for <code class="prettyprint">date</code> (YYYY-MM-DD).</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>identifiers</td>
<td>Fields that are set to identify member</td>
<td>Array<string></td>
</tr>
<tr>
<td>consents</td>
<td>Definition of available consents. Versions are now <code class="prettyprint">&#39;&#39;</code>.</td>
<td>JSON Object</td>
</tr>
<tr>
<td>languages</td>
<td>Languages set up in loyalty club</td>
<td>Array<string></td>
</tr>
<tr>
<td>default_language</td>
<td>Default language used in loyalty club and also used for mappings to Api v2</td>
<td>string</td>
</tr>
<tr>
<td>version</td>
<td>Version of schema, currently the newest is <code class="prettyprint">v2</code></td>
<td>string</td>
</tr>
<tr>
<td>products</td>
<td>Properties scoping and ordering by product name, default one is <code class="prettyprint">default</code></td>
<td>object</td>
</tr>
<tr>
<td>required</td>
<td>Required properties for member</td>
<td>integer (timestamp)</td>
</tr>
<tr>
<td>properties</td>
<td>Properties describing member</td>
<td>object</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Schema:Get</code> permit
</aside>

<h2 id="list-products"><a name="v3-loyalty-clubs-products"></a> List products</h2>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/products"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, the above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Webforms"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webforms"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"filtered_member_properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"msisdn"</span><span class="p">,</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w"> </span><span class="s2">"first_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"last_name"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"subproducts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"is_webform"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"filtered_member_properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"subproducts"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"is_webform"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/products</code></p>

<p>Returns list of Products (AKA Channels, AKA Sources) defined for Loyalty Club.</p>

<h3 id="product-response-model-in-json-array">Product response model (in JSON array)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Product name</td>
<td>string</td>
</tr>
<tr>
<td>slug</td>
<td>Product slug</td>
<td>string</td>
</tr>
<tr>
<td>filtered_member_properties</td>
<td>Member that are available to access (CRUD) for this product. When empty, all properties are available.</td>
<td>Array<string></td>
</tr>
<tr>
<td>subproducts</td>
<td>Subproducts/Subchannels available for the product</td>
<td>Array<string></td>
</tr>
<tr>
<td>is_webform</td>
<td>Is the product also a webform?</td>
<td>boolean</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Products:Index</code> permit
</aside>

          <h1 id="endpoints-members">Endpoints &bull; Members</h1>

<h2 id="list"><a name="v3-members-index"></a> List</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members?per_page=100&amp;page=1&amp;ids[]=1&amp;ids[]=2"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns hash structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"members"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">List</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">members</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">See</span><span class="p">:</span><span class="w"> </span><span class="s2">"General Info -&gt; Member JSON model"</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2050</span><span class="p">,</span><span class="w">
    </span><span class="s2">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prev_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_first_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_last_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_out_of_range"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">  
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members?per_page=:per_page&amp;page=:page</code></p>

<p>Returns paginated list of all Loyalty Club members, sorted by <code class="prettyprint">created_at ASC</code>.</p>

<p>Every returned member is represented by <a href="#v3-member-model">Member model</a>.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>no</td>
<td>1000</td>
<td>Number of results to be returned per request (1000 is the maximum)</td>
</tr>
<tr>
<td>page_no</td>
<td>integer</td>
<td>no</td>
<td>1</td>
<td>Number of results page</td>
</tr>
<tr>
<td>ids</td>
<td>Array<integer></td>
<td>no</td>
<td>null</td>
<td>IDs of members that will be returned</td>
</tr>
<tr>
<td>properties[:property_name]</td>
<td>Array<any></td>
<td>no</td>
<td>null</td>
<td>Properties of members that will be returned. A property must be enabled for querying in the Loyalty Club configuration before it can be used here. Please contact us if you need this feature.</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>members</td>
<td>Array<Member></td>
<td>Array of <a href="#v3-member-model">Members</a></td>
</tr>
<tr>
<td>pagination_info</td>
<td>Object</td>
<td><a href="#v3-pagination-model">Pagination</a> object</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>:per_page param exceeds the limit</td>
</tr>
</tbody></table>

<h3 id="example-queries">Example queries</h3>

<ul>
<li><code class="prettyprint">/members?properties[gender]=man&amp;properties[language][]=en&amp;properties[language][]=pl</code> - returns members with <code class="prettyprint">gender=&quot;man&quot; AND language IN (&quot;en&quot;, &quot;pl&quot;)</code></li>
<li><code class="prettyprint">/members?ids[]=1&amp;ids[]=2</code> - returns members with <code class="prettyprint">id IN (1, 2)</code></li>
</ul>

<aside class="notice">
Requires <code>BL:Api:Members:Index</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="get-public-info"><a name="v3-members-public-info"></a> Get public info</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/:id/public_info"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns hash structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"exists"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"can_login"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">deprecated</span><span class="w">
  </span><span class="s2">"available_identifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"email"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"has_password"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:id/public_info</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/by_msisdn/:msisdn/public_info</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/by_email/:email/public_info</code></p>

<p>Returns basic info for given member. If member does not exist, returns `null&rsquo;.</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Member&rsquo;s ID</td>
<td>integer</td>
</tr>
<tr>
<td>msisdn</td>
<td>Member&rsquo;s msisdn</td>
<td>string (format as defined <a href="#msisdn-member-identifier">here</a> - example: <code class="prettyprint">4740485124</code>)</td>
</tr>
<tr>
<td>email</td>
<td>Member&rsquo;s email</td>
<td>string (email)</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>exists</td>
<td>boolean</td>
<td>Does member with given identifier exist in given Loyalty Club?</td>
</tr>
<tr>
<td>can_login</td>
<td>boolean</td>
<td>Is this member able to sign? (deprecated)</td>
</tr>
<tr>
<td>available_identifiers</td>
<td>string[]</td>
<td>Identifiers that are set on member</td>
</tr>
<tr>
<td>has_password</td>
<td>boolean</td>
<td>Was password set by member?</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Check</code> permit
</aside>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid MSISDN param</td>
</tr>
</tbody></table>

<!--- ############################################################################################################# --->

<h2 id="get-person-id"><a name="v3-members-person-id"></a> Get person id</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/:id/person_id"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns hash structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"storage"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">92</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:id/person_id</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/by_msisdn/:msisdn/person_id</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/by_email/:email/person_id</code></p>

<p>Returns <code class="prettyprint">person_id</code> for given member. Please note that <code class="prettyprint">person_id</code> cannot be preset in member payload and will be silently ignored. Also, it cannot be updated.</p>

<blockquote>
<p>There are 4 possible successful responses:</p>

<p>If member currently exists in database:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">92</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If member does not exist but was deleted in last 30 days:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"storage"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">92</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If member had existed, was deleted (in last 30 days) and was created again so it exists now:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"db_and_cache"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>If member does not exist and never existed or did not exist in last 30 days:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_found"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"person_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Member&rsquo;s ID</td>
<td>integer</td>
</tr>
<tr>
<td>msisdn</td>
<td>Member&rsquo;s msisdn</td>
<td>string (format as defined <a href="#msisdn-member-identifier">here</a> - example: <code class="prettyprint">4740485124</code>)</td>
</tr>
<tr>
<td>email</td>
<td>Member&rsquo;s email</td>
<td>string (email)</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>If query was successful?</td>
</tr>
<tr>
<td>source</td>
<td>string</td>
<td>Source of <code class="prettyprint">person_id</code> (possible values are: <code class="prettyprint">not_found</code>, <code class="prettyprint">db</code>, <code class="prettyprint">storage</code>)</td>
</tr>
<tr>
<td>person_id</td>
<td>integer</td>
<td>Member&rsquo;s <code class="prettyprint">person_id</code></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Check</code> permit
</aside>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid MSISDN param</td>
</tr>
</tbody></table>

<!--- ############################################################################################################# --->

<h2 id="get"><a name="v3-members-get"></a> Get</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/:id"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, the above command returns member object as depicted <a href="#v3-member-model">here</a></p>
</blockquote>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:id</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/by_msisdn/:msisdn</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/by_email/:email</code></p>

<p>Returns member by one of three identifier types: <code class="prettyprint">id</code>, <code class="prettyprint">member</code> or <code class="prettyprint">email</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Member&rsquo;s ID</td>
<td>integer</td>
</tr>
<tr>
<td>msisdn</td>
<td>Member&rsquo;s msisdn</td>
<td>string (format as defined <a href="#msisdn-member-identifier">here</a> - example: <code class="prettyprint">4740485124</code>)</td>
</tr>
<tr>
<td>email</td>
<td>Member&rsquo;s email</td>
<td>string (email)</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>See: <a href="#v3-member-model">Member model</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member with given identifier could not found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid MSISDN param</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Get</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="create"><a name="v3-members-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
curl -X POST <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: facebook'</span> <span class="se">\</span>
  -H <span class="s1">'X-Subproduct-Name: campaign-10-2017'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'{
    "properties": {
        "email": "dev+6@example.com",
        "msisdn": "4740485124",
        "first_name": "The",
        "last_name": "Doge"
    },
    "consents": {
        "consent1": { "status": true },
        "consent2": { "status": false }
    },
    "send_sms_welcome_message": false
}'</span>

</code></pre>
<blockquote>
<p>When successful, the above command returns created member object as depicted <a href="#v3-member-model">here</a></p>

<p>When payload is invalid, validation errors like this are returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">

            </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"duplicated_email_in_community"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/members</code></p>

<p>Create member with given properties.</p>

<p>Available properties and their validation rules are defined by Loyalty Club schema (see: <a href="#v3-loyalty-clubs-schema">here</a>).</p>

<p>Actual welcome messages sending depends on Loyalty Club and Product configuration.
For example, even if send_email_welcome_message:true param is provided, message may not be sent because either Product 
or Loyalty has disabled welcome messages or Loyalty Club has no e-mails configured at all.</p>

<p>There is also a possibility to have multiple SMS welcome messages sent. The one that matches Product or default one will be sent.</p>

<h3 id="registration-password"><a name="v3-members-create-registration-password"></a> Registration Password</h3>

<p>Some API clients (depends on Permit assigned to given <code class="prettyprint">X-Client-Authorization</code> token) may be required to provide 
valid <code class="prettyprint">registration_password</code> param that is sent to user with <a href="#v3-members-send-registration-password">Members &bull; Send registration password</a> </p>

<h3 id="headers">Headers</h3>

<table><thead>
<tr>
<th>Header name</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>X-Subproduct-Name</td>
<td>no</td>
<td>Additional source/optin channel information</td>
</tr>
</tbody></table>

<h3 id="post-parameters-json"><a name="v3-members-create-post-parameters"></a> POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>properties</td>
<td><strong>yes</strong></td>
<td>none</td>
<td>JSON with properties for member</td>
<td>JSON Object</td>
</tr>
<tr>
<td>properties[&lsquo;language&rsquo;]</td>
<td>no</td>
<td>&ldquo;default_language&rdquo; from schema</td>
<td>Language used by user</td>
<td>string</td>
</tr>
<tr>
<td>properties[&lsquo;msisdn&rsquo;]</td>
<td>yes*</td>
<td>none</td>
<td>Unique member&rsquo;s msisdn as defined <a href="#msisdn-member-identifier">here</a>) Example: <code class="prettyprint">4740485124</code>.</td>
<td>string</td>
</tr>
<tr>
<td>properties[&lsquo;email&rsquo;]</td>
<td>yes*</td>
<td>none</td>
<td>Member&rsquo;s email</td>
<td>string</td>
</tr>
<tr>
<td>consents</td>
<td>no</td>
<td>{}</td>
<td>Member&rsquo;s consents (similar to <a href="#v3-member-consents-model">Member&rsquo;s consents JSON model</a>)</td>
<td>JSON Object</td>
</tr>
<tr>
<td>sms_enabled</td>
<td>no</td>
<td>true</td>
<td>Should SMS channel be enabled for member?</td>
<td>Boolean</td>
</tr>
<tr>
<td>email_enabled</td>
<td>no</td>
<td>true</td>
<td>Should email channel be enabled for member?</td>
<td>Boolean</td>
</tr>
<tr>
<td>push_enabled</td>
<td>no</td>
<td>true</td>
<td>Should push channel be enabled for member?</td>
<td>Boolean</td>
</tr>
<tr>
<td>send_sms_welcome_message</td>
<td>no</td>
<td>true</td>
<td>Should SMS welcome message be sent to member?</td>
<td>Boolean</td>
</tr>
<tr>
<td>send_email_welcome_message</td>
<td>no</td>
<td>true</td>
<td>Should email welcome be sent to member</td>
<td>Boolean</td>
</tr>
<tr>
<td>password</td>
<td>depends</td>
<td>none</td>
<td>Member&rsquo;s password. Not required, but user won&rsquo;t be able to log in without this when only its email is provided</td>
<td>string</td>
</tr>
<tr>
<td>registration_password</td>
<td>depends</td>
<td>none</td>
<td>Password for registration for member MSISDN verification, see <a href="#v3-members-create-registration-password">above</a></td>
<td></td>
</tr>
</tbody></table>

<p>&ast; At least one of those properties must be provided</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Created member properties - see: <a href="#v3-member-model">Member model</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td><a href="#validation-on-members">validation errors</a> JSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">465</code></td>
<td><code class="prettyprint">registration_password</code> or <code class="prettyprint">password</code> param is missing</td>
</tr>
<tr>
<td><code class="prettyprint">466</code></td>
<td><code class="prettyprint">registration_password</code> param is invalid</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Create</code> or <code>BL:Api:Members:CreateWithVerification</code>permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="update"><a name="v3-members-update"></a> Update</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/:id <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
    "properties": {
      "last_name": "Doge"
    },
    "password": "new_password"
  }'</span>
</code></pre>
<blockquote>
<p>When successful, the above command returns updated member object as depicted <a href="#v3-member-model">here</a></p>

<p>When payload is invalid, validation errors as depicted <a href="#v3-members-create">here</a></p>
</blockquote>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:id</code></p>

<p>Update member&rsquo;s properties, consents and other with given ones.</p>

<p>It is intended for partial updates:
* not given properties are neither deleted nor overwritten,
* not given attributes (like consents) won&rsquo;t be changed in any way.</p>

<p>If deleting properties is intended, their value should be sent as <code class="prettyprint">null</code>.</p>

<p>This endpoint may return validation errors (<code class="prettyprint">422</code>) even for current member properties. 
That&rsquo;s because loyalty club schema may get changed over time which results in invalidating existing users.</p>

<p>To bypass such validation errors, you may provide <code class="prettyprint">validate_partially: true</code> param which will validate and update only 
attributes that were provided in payload. </p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Member&rsquo;s ID</td>
<td>integer</td>
</tr>
</tbody></table>

<h3 id="put-parameters-json">PUT Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>properties</td>
<td>JSON with properties for member</td>
<td>JSON Object</td>
<td>null</td>
</tr>
<tr>
<td>consents</td>
<td>Member&rsquo;s consents (similar to <a href="#v3-member-consents-model">Member&rsquo;s consents JSON model</a>)</td>
<td>JSON Object</td>
<td>null</td>
</tr>
<tr>
<td>password</td>
<td>Member&rsquo;s password</td>
<td>string</td>
<td>null</td>
</tr>
<tr>
<td>sms_enabled</td>
<td>Should SMS channel be enabled for member?</td>
<td>Boolean</td>
<td>null</td>
</tr>
<tr>
<td>email_enabled</td>
<td>Should email channel be enabled for member?</td>
<td>Boolean</td>
<td>null</td>
</tr>
<tr>
<td>push_enabled</td>
<td>Should push channel will be enabled for member?</td>
<td>Boolean</td>
<td>null</td>
</tr>
<tr>
<td>validate_partially</td>
<td>Should only provided data be validated?</td>
<td>Boolean</td>
<td>false</td>
</tr>
<tr>
<td>event_occurred_at</td>
<td>See: <a href="#v3-member-event-occured-at-param"><code class="prettyprint">event_occurred_at</code> param</a></td>
<td>Date</td>
<td>(current time)</td>
</tr>
</tbody></table>

<h4 id="event_occurred_at-param"><a name="v3-member-event-occured-at-param"></a> <code class="prettyprint">event_occurred_at</code> param</h4>

<p>When actual member data change occurred at the time different than request&rsquo;s time, you can utilize the `event_occurred_at&rsquo; param to pass
the actual update time.</p>

<p>This may be relevant when you want this to be reflected in the member&rsquo;s changes history.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Member properties after update - see: <a href="#v3-member-model">Member model</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member could not be found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><a href="#validation-on-members">validation errors</a> JSON object.</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Update</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="update-app-token"><a name="v3-members-update-app-token"></a> Update app token</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/:id/update_app_token <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
     "app_token": "tok3n",
     "app_platform": "android"
   }'</span>
</code></pre>
<blockquote>
<p>When successful, returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid, returns error response (422)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid parameters"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"app_token"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"must be a string"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"app_platform"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"must be one of: android, ios"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:id/update_app_token</code></p>

<p>Updates member&rsquo;s Firebase token, along with platform it&rsquo;s that it&rsquo;s associated with. </p>

<p>Token may be removed by sending it as empty string or null, empty payload will also be treated as token removal.
Platform is automatically removed when token is empty.</p>

<h3 id="put-parameters-json">PUT Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>app_token</td>
<td>string</td>
<td>Firebase push token</td>
</tr>
<tr>
<td>app_platform</td>
<td>string</td>
<td>One of: <code class="prettyprint">[&#39;android&#39;, &#39;ios&#39;]</code></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member could not be found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:UpdateAppToken</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="destroy"><a name="v3-members-destroy"></a> Destroy</h2>

<p><strong>DELETE</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/:id</code></p>

<p>Permanently removes member.</p>

<p>It is possible to trigger optout message by setting <code class="prettyprint">send_unsubscribe_message=true</code> query string parameter.
Same as welcome messages, optout messages sending also depends on Loyalty Club and Product configuration.</p>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
    <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/:id"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, the above command returns destroyed member object as depicted <a href="#v3-member-model">here</a></p>
</blockquote>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Member&rsquo;s ID</td>
<td>integer</td>
</tr>
</tbody></table>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>send_email_unsubscribe_message</td>
<td>no</td>
<td>true</td>
<td>Should optout email be sent to member?</td>
<td>Boolean</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Properties of member that has been destroyed - see: <a href="#v3-member-model">Member model</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member could not be found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><a href="#validation-on-members">validation errors</a> JSON object.</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Destroy</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="validate"><a name="v3-members-validate"></a> Validate</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
curl -X POST <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/validate <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: android-app'</span> <span class="se">\</span>
  -H <span class="s1">'X-Subproduct-Name: campaign-10-2017'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'{
    "properties": {
        "gender": "wrong",
        "email": "foo@ba.r.ba.z"
    },
    "registration_password": "a145"
  }'</span>

</code></pre>
<blockquote>
<p>When data is valid, returns JSON object structured like this </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When data is not valid, returns JSON object structured like this </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="p">{</span><span class="w"> </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_not_match"</span><span class="p">,</span><span class="w"> </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gender"</span><span class="p">,</span><span class="w"> </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wrong"</span><span class="p">,</span><span class="w"> </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="s2">"man, woman"</span><span class="w"> </span><span class="p">}</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_mx"</span><span class="p">,</span><span class="w"> </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"registration_password"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/validate</code></p>

<p>Checks if given data is valid for new member registration. Returns successful response (200), regardless of data validity.</p>

<h3 id="about-partial-validation-mechanism">About partial validation mechanism</h3>

<p>Only properties which keys are present in given payload will be checked against presence validation.</p>

<p>For example, let&rsquo;s say that Loyalty Club configuration requires member to have <code class="prettyprint">msisdn</code> property set.</p>

<ul>
<li>if <code class="prettyprint">&quot;msisdn&quot;: &quot;&quot;</code> or<code class="prettyprint">&quot;msisdn&quot;: null</code>&ldquo; is present in the payload, the validation will return error stating that <code class="prettyprint">msisdn</code> must be present.</li>
<li>however, when payload doesn&rsquo;t include the <code class="prettyprint">msisdn</code> key, such error will not be returned.</li>
</ul>

<p>This behaviour has been designed to allow validate member partially, property by property. This way you can choose 
what values should be validated at specific point of registration.</p>

<h3 id="post-parameters-json"><a name="v3-members-validate-post-parameters"></a> POST Parameters (JSON)</h3>

<p>Following keys of <a href="#v3-members-create-post-parameters">Members &bull; Create</a> payload are supported when validating:</p>

<ul>
<li>properties</li>
<li>consents</li>
<li>registration_password</li>
</ul>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>valid</td>
<td>boolean</td>
<td>Is the data valid?</td>
</tr>
<tr>
<td>errors</td>
<td>object</td>
<td><a href="#validation-on-members">validation errors</a> JSON object, <code class="prettyprint">null</code> when data is valid</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Validate</code> permit
</aside>

<h2 id="reset-password"><a name="v3-members-reset-password"></a> Reset password</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  <span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/members/by_email/:email/reset_password"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="se">\</span>
    <span class="s1">'{
      "password": "new_password",
      "token": "k4wort03j2"
    }'</span>
</code></pre>
<blockquote>
<p>When successful, returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/by_email/:email/reset_password</code></p>

<p>Updates given member password if token is valid.</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>Member&rsquo;s new password</td>
<td>string</td>
</tr>
<tr>
<td>token</td>
<td>Confirmation token generated and sent with <a href="#v3-members-send-password-reset-token">Members &bull; Send password reset token</a></td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">400</code></td>
<td><code class="prettyprint">password</code> or <code class="prettyprint">token</code> param is missing</td>
</tr>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member could not be found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid password - returns <a href="#validation-on-members">validation errors</a> JSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">463</code></td>
<td>Invalid confirmation token</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:ResetPassword</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="send-password-reset-token"><a name="v3-members-send-password-reset-token"></a> Send password reset token</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/by_email/joe@example.com/send_password_reset_token"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Always returns an empty JSON object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/by_email/:email/send_password_reset_token</code></p>

<p>Sends password reset link to given e-mail address if it is associated with member in given loyalty club.</p>

<p>The e-mail contains a token generated for member, valid for 24 hours.</p>

<p>The token can be then used to reset password with <a href="#v3-members-reset-password">Members &bull; Reset password</a>.
It also may be verified with <a href="#v3-members-verify-token">Members &bull; Verify token</a></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>Member&rsquo;s email</td>
<td>string (email)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Tokens:Create</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="send-one-time-password-sms"><a name="v3-members-send-one-time-password"></a> Send one time password SMS</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/by_msisdn/4740485124/send_one_time_password"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Always returns an empty JSON object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/by_msisdn/:msisdn/send_one_time_password</code></p>

<p>Sends an SMS to given msisdn if it is associated with member in given loyalty club.</p>

<p>The SMS contains 4-digit One-Time-Password generated for member, valid for 1 hour.</p>

<p>This password then can be used to sign in, just as &quot;regular&rdquo; member password - see:  <a href="#v3-token-create">OAuth Token &bull; Create</a>.</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>msisdn</td>
<td>Member&rsquo;s msisdn</td>
<td>string (format as defined <a href="#msisdn-member-identifier">here</a> - example: <code class="prettyprint">4740485124</code>)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:CreateOneTimePassword</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="send-one-time-password-e-mail"><a name="v3-members-send-one-time-password-email"></a> Send one time password E-mail</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/by_email/user@example.com/send_one_time_password"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Always returns an empty JSON object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/by_msisdn/:msisdn/send_one_time_password</code></p>

<p>Sends a &ldquo;Login&rdquo; e-mail to given address if it is associated with member in given loyalty club. The e-mail contains a deep link to the mobile app.</p>

<p>The link scheme is: <code class="prettyprint">https://&lt;app_scheme&gt;.al.bstcm.no/lgn?member_id=&lt;member_id&gt;&amp;otp=&lt;otp&gt;</code> and contains member id and 16-digit password generated for member, valid for 1 hour.  </p>

<p>Those params then can be used to sign in the user, just as &ldquo;regular&rdquo; member password - see:  <a href="#v3-token-create">OAuth Token &bull; Create</a>.</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>Member&rsquo;s email</td>
<td>e-mail</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid e-mail param</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:CreateOneTimePassword</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="send-registration-password"><a name="v3-members-send-registration-password"></a> Send registration password</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/by_msisdn/4740485124/send_registration_password"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="se">\</span>
    <span class="s1">'{
      "language": "en"
     }'</span>
</code></pre>
<blockquote>
<p>Always returns an empty JSON object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/by_msisdn/:msisdn/send_registration_password</code></p>

<p>Sends SMS to given MSISDN.</p>

<p>The sent message contains 4-digit registration password, valid for 10 minutes.</p>

<p>This password may be required for member registration - see: <a href="#v3-members-create-registration-password">Registration password</a></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>msisdn</td>
<td>MSISDN</td>
<td>string (format as defined <a href="#msisdn-member-identifier">here</a> - example: <code class="prettyprint">4740485124</code>)</td>
</tr>
</tbody></table>

<h3 id="post-parameters">POST Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>Language of the registration password message. When not provided, default LC language will be used</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid MSISDN param</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:CreateRegistrationPassword</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="verify-token"><a name="v3-members-verify-token"></a> Verify token</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/by_email/joe@example.com/verify_token/password_reset/k4wort03j2"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"valid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/by_email/:email/verify_token/:type/:token</code></p>

<p>Verifies given member token. Returns response indicating if given token is (still) valid.</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>Member&rsquo;s email</td>
<td>string (email)</td>
</tr>
<tr>
<td>type</td>
<td>Token type</td>
<td><code class="prettyprint">password_reset</code> (more types in future)</td>
</tr>
<tr>
<td>token</td>
<td>Token</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>valid</td>
<td>boolean</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">400</code></td>
<td>Invalid <code class="prettyprint">type</code></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Tokens:Verify</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="send-msisdn-verification-sms"><a name="v3-members-send-verification-sms"></a> Send MSISDN verification SMS</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/channels/msisdn/4740485124/send_verification"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="se">\</span>
    <span class="s1">'{
      "for_mobile_app": false
    }'</span>
</code></pre>
<p><strong>PUT</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/channels/msisdn/:msisdn/send_verification</code></p>

<p>Generates a verification token for member identified by given MSISDN and sends it to him with an SMS message.
The token is valid for 30 days.</p>

<p>By default, a link to Webforms is sent.
When <code class="prettyprint">for_mobile_app = true</code> param is provided, a deep link to mobile app is generated instead.</p>

<h3 id="put-body-parameters">PUT body parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>for_mobile_app</td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>Should a deep-link to mobile app be generated?</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>Always returns <code class="prettyprint">204 (No content)</code></p>

<aside class="notice">
Requires <code>BL:Api:Members:Msisdns:Verify</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="verify-msisdn"><a name="v3-members-verify-msisdn"></a> Verify MSISDN</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/channels/msisdn/4740485124/verify"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="se">\</span>
    <span class="s1">'{
      "token": "shNWPezzYoIuJV2qDIcQrdFQqUdlVdquwUJrNb2Nuw"
    }'</span>
</code></pre>
<blockquote>
<p>When successful, returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">/v3/:loyalty_club_slug/members/channels/msisdn/:msisdn/verify</code></p>

<p>Uses given token (sent with <a href="#v3-members-send-verification-sms">Members &bull; Send MSISDN verification SMS</a>) to verify
user identified with given MSISDN.</p>

<h3 id="put-body-parameters">PUT body parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>string</td>
<td>yes</td>
<td>Token generated and sent with <a href="#v3-members-send-verification-sms">Members &bull; Send MSISDN verification SMS</a></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">400</code></td>
<td>Token missing</td>
</tr>
<tr>
<td><code class="prettyprint">463</code></td>
<td>Invalid token (it may not exist, or not match the user or be expired)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Msisdns:Verify</code> permit
</aside>

          <h1 id="endpoints-me">Endpoints &bull; Me</h1>

<h2 id="introduction"><a name="v3-oauth2"></a> Introduction</h2>

<blockquote>
<p>Example header: <code class="prettyprint">Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522</code></p>
</blockquote>

<p>Actions related to specific member (the one that is using your application) require to have member authenticated and we implement
OAuth2 flow for this.</p>

<p>To authorize those actions, we <strong>require</strong> <code class="prettyprint">Authorization</code> header that should contain: <code class="prettyprint">Bearer :access_token</code>. </p>

<p>Look at <a href="#v3-token-create">OAuth Token &bull; Create</a> to see how to obtain the :access_token.</p>

<h2 id="get"><a name="v3-me-get"></a> Get</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span>
</code></pre>
<blockquote>
<p>Responses as same as in <a href="#v3-members-get">Members &bull; Get</a></p>
</blockquote>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me</code></p>

<p>Returns &ldquo;current&rdquo; member - the one that given Authorization token has been issued for.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>See: <a href="#v3-member-model">Member model</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:Get</code> permit.
</aside>

<h2 id="update"><a name="v3-me-update"></a> Update</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/me <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
      "properties": {
          "last_name": "Doge"
      },
      "password": "new_password"
  }'</span>
</code></pre>
<blockquote>
<p>Responses are same as in <a href="#v3-members-update">Members &bull; Update</a></p>
</blockquote>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me</code></p>

<p>Updates &ldquo;current&rdquo; member - the one that given Authorization token has been issued for.
As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<p>Besides that OAuth context, it works exactly the same as <a href="#v3-members-update">Members &bull; Update</a>. </p>

<h3 id="parameters">Parameters</h3>

<p>It accepts same PUT and URL parameters as in <a href="#v3-members-update">Members &bull; Update</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Same as in <a href="#v3-members-update">Members &bull; Update</a>.</p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><a href="#validation-on-members">Validation errors</a> JSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:Update</code> permit.
</aside>

<h2 id="update-password"><a name="v3-me-update-password"></a> Update password</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/me/update_password <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
      "current_password": "123"
      "password": "SuperStrongP4ssw0rd"
  }'</span>
</code></pre>
<blockquote>
<p>Always returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/update_password</code></p>

<p>Updates &ldquo;current&rdquo; member (the one that given Authorization token has been issued for) password.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<p>In opposition to <a href="#v3-me-update">Me &bull; Update</a>, it does not validate current user data, only given password.</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>Member&rsquo;s new password</td>
<td>string</td>
</tr>
<tr>
<td>current_password</td>
<td>Member&rsquo;s current password</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid password - returns <a href="#validation-on-members">validation errors</a> JSON object.</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
<tr>
<td><code class="prettyprint">464</code></td>
<td>Invalid current_password</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:UpdatePassword</code> permit.
</aside>

<h2 id="update-app-token"><a name="v3-me-update-app-token"></a> Update app token</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/members/me/update_app_token <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
  -d <span class="se">\</span>
  <span class="s1">'{
     "app_token": "tok3n",
     "app_platform": "android"
   }'</span>
</code></pre>
<blockquote>
<p>When successful, returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid, returns error response (422). See <a href="#v3-members-update-app-token">Members &bull; Update app token</a></p>
</blockquote>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me/update_app_token</code></p>

<p>Behaves like <a href="#v3-members-update-app-token">Members &bull; Update app token</a></p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="put-parameters-json">PUT Parameters (JSON)</h3>

<p>See <a href="#v3-members-update-app-token">Members &bull; Update app token</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:UpdateAppToken</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="destroy"><a name="v3-me-destroy"></a> Destroy</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
    <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
</code></pre>
<blockquote>
<p>Response as same as in <a href="#v3-members-destroy">Members &bull; Destroy</a></p>
</blockquote>

<p><strong>DELETE</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/me</code></p>

<p>Permanently removes &ldquo;current&rdquo; member - the one that given Authorization token has been issued for.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="parameters">Parameters</h3>

<p>It accepts same URL &amp; query parameters as in <a href="#v3-members-destroy">Members &bull; Destroy</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Same as in <a href="#v3-members-destroy">Members &bull; Destroy</a>.</p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Member associated with given Authorization token does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Member not authorized (Invalid or expired OAuth token)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth:Destroy</code> permit.
</aside>

          <h1 id="endpoints-oauth">Endpoints &bull; OAuth</h1>

<h2 id="create-token"><a name="v3-token-create"></a> Create token</h2>

<blockquote>
<p>Create token example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/oauth/token"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'{
      "grant_type": "password",
      "identifier_type": "id",
      "identifier": 42,
      "password": "123"
    }'</span>
</code></pre>
<blockquote>
<p>Refresh token example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/oauth/token"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'{
      "grant_type": "refresh_token",
      "refresh_token": "36c636e4290d28488a13691afce351397bec21b1246c2c7896a8262d9bfbc4c4"
    }'</span>
</code></pre>
<blockquote>
<p>When successful, both commands return JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af9e5361cd7e083dfa4132df3ea7ab82fac21496991632a9994a8c2a9f33884f"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36c636e4290d28488a13691afce351397bec21b1246c2c7896a8262d9bfbc4c4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506523094</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource_owner_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/oauth/token</code></p>

<p>Creates a new access token by one of two methods (grant types):</p>

<ul>
<li><code class="prettyprint">password</code> - token is issued by providing user credentials</li>
<li><code class="prettyprint">refresh_token</code> - token is issued by providing refresh token obtained from <code class="prettyprint">password</code> grant type </li>
</ul>

<h3 id="creating-token-password-grant">Creating token (<code class="prettyprint">password</code> grant)</h3>

<p>When creating new access token, <code class="prettyprint">&quot;grant_type&quot;: &quot;password&quot;</code> should be given along with member credentials (see example on the right).</p>

<p>In response, two tokens are returned:</p>

<ul>
<li><code class="prettyprint">access_token</code> that is valid for <strong>24 hours</strong> - may be used to authenticate member in member-related actions (see: <a href="#v3-oauth2">OAuth2</a>).</li>
<li><code class="prettyprint">refresh_token</code> which is valid for <strong>1 year</strong> - may be used to get a new access token (with <code class="prettyprint">refresh_token</code> grant)</li>
</ul>

<p>Also, <code class="prettyprint">resource_owner_id</code> is returned, is an ID of member that the token has been issued for. </p>

<h3 id="refreshing-token-refresh_token-grant">Refreshing token (<code class="prettyprint">refresh_token</code> grant)</h3>

<p>You can obtain a new token after (or before) it&rsquo;s expiration time, by using <code class="prettyprint">refresh_token</code> grant.</p>

<p>Param <code class="prettyprint">grant_type: &quot;refresh_token&quot;</code> must be provided along with <code class="prettyprint">refresh_token: &quot;:refresh_token&quot;</code>  (see example on the right).</p>

<p>It returns a token response, same as for <code class="prettyprint">password</code> grant, but with new tokens.</p>

<h3 id="post-parameters-json-object">POST Parameters (JSON object)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>For grant type</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td>type of grant</td>
<td>enum: <code class="prettyprint">password</code>, <code class="prettyprint">refresh_token</code></td>
<td>-</td>
</tr>
<tr>
<td>identifier_type</td>
<td>identifier type that user should be retrieved by</td>
<td>enum: <code class="prettyprint">id</code>, <code class="prettyprint">email</code>, <code class="prettyprint">msisdn</code></td>
<td><code class="prettyprint">password</code></td>
</tr>
<tr>
<td>identifier</td>
<td>value of member identifier</td>
<td>mixed (e.g. <code class="prettyprint">134123123</code>, <code class="prettyprint">+47123456789</code> or <code class="prettyprint">alice@example.com</code>)</td>
<td><code class="prettyprint">password</code></td>
</tr>
<tr>
<td>password</td>
<td>member password, One-Time-Password or Registration Password</td>
<td>string</td>
<td><code class="prettyprint">password</code></td>
</tr>
<tr>
<td>refresh_token</td>
<td>refresh token</td>
<td>string</td>
<td><code class="prettyprint">access_token</code></td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>Token that member can be authenticated with</td>
<td>string</td>
</tr>
<tr>
<td>token_type</td>
<td>Always &ldquo;bearer&rdquo;</td>
<td>string</td>
</tr>
<tr>
<td>expires_in</td>
<td>Seconds for how long token will be valid</td>
<td>integer (seconds)</td>
</tr>
<tr>
<td>refresh_token</td>
<td>Token that may be used to issue a new :access_token</td>
<td>string</td>
</tr>
<tr>
<td>created_at</td>
<td>When the token has been created</td>
<td>integer (timestamp)</td>
</tr>
<tr>
<td>resource_owner_id</td>
<td>ID of member that the token has been for</td>
<td>integer</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">461</code></td>
<td>Invalid member credentials provided for <code class="prettyprint">password</code> grant. Either member could not be found or password is wrong</td>
</tr>
<tr>
<td><code class="prettyprint">462</code></td>
<td>Invalid refresh_token provided for <code class="prettyprint">refresh_token</code> grant (may be expired)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="revoke-token"><a name="v3-token-revoke"></a> Revoke token</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/oauth/revoke"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'{
      "token": "36c636e4290d28488a13691afce351397bec21b1246c2c7896a8262d9bfbc4c4" 
    }'</span>
</code></pre>
<blockquote>
<p>Always returns an empty JSON object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/oauth/revoke</code></p>

<p>Revokes a token (access or refresh). </p>

<p>Always returns an empty JSON object (even if given token is invalid).</p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>access or refresh token obtained from <a href="#v3-token-create">OAuth Token &bull; Create</a></td>
<td>string</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth</code> permit
</aside>

<!--- ############################################################################################################# --->

<h2 id="get-token-info"><a name="v3-token-info"></a> Get token info</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/oauth/token/info"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span>

</code></pre>
<blockquote>
<p>When successful, return JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"resource_owner_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">ID</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">member</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">token</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">issued</span><span class="w"> </span><span class="err">for</span><span class="w">
    </span><span class="s2">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"expires_in_seconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">73614</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Seconds</span><span class="w"> </span><span class="err">until</span><span class="w"> </span><span class="err">expiration</span><span class="w">
    </span><span class="s2">"application"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1506516784</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/oauth/token/info</code></p>

<p>Returns info of given token (not refresh token) from <code class="prettyprint">Authorization</code> header.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>resource_owner_id</td>
<td>ID of member that the token has been for</td>
<td>integer</td>
</tr>
<tr>
<td>scopes</td>
<td>Not implemented</td>
<td>Array<string></td>
</tr>
<tr>
<td>expires_in_seconds</td>
<td>Seconds for how long token will be valid</td>
<td>integer (seconds)</td>
</tr>
<tr>
<td>application</td>
<td>Not implemented</td>
<td>Object</td>
</tr>
<tr>
<td>created_at</td>
<td>When the token has been created</td>
<td>integer (timestamp)</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">460</code></td>
<td>Token from <code class="prettyprint">Authorization</code> is invalid (or expired)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:OAuth</code> permit
</aside>

<!--- ############################################################################################################# --->

          <h1 id="endpoints-members-imports">Endpoints &bull; Members Imports</h1>

<h2 id="import-flow"><a name="v3-members-imports-import-flow"></a> Import flow</h2>

<h4 id="import-bulks">Import bulks</h4>

<p>At most 1000 member records may be sent in one request.</p>

<p>If you intend to import more than that, you may group them by <code class="prettyprint">import_id</code>, so multiple bulks will be grouped into one import.</p>

<p>Nevertheless, keep in mind, that import always consists of at least one bulk.</p>

<h4 id="import-statuses">Import statuses</h4>

<p>Each bulk is processed by an asynchronous job, so you need to check it&rsquo;s status some time after sending a request.</p>

<p>For that, you should firstly check the import status <a href="#v3-members-imports-status">here</a> and then 
check bulks details for each bulk <a href="#v3-members-imports-bulk-status">here</a>.</p>

<p>Please note that:</p>

<ul>
<li>We recommend to check status in intervals not smaller than 5 seconds</li>
<li>In extreme cases, it make take even few hours for bulk to be fully processed</li>
<li>24 hours after import request any potential personal data (contained in <code class="prettyprint">member_payloads</code> and <code class="prettyprint">errors</code>) is permanently removed from server</li>
</ul>

<h4 id="bulk-statuses">Bulk statuses</h4>

<p>When bulk is created, it gets <code class="prettyprint">waiting</code> status.</p>

<p>When bulk has been picked by asynchronous job, it transitions into <code class="prettyprint">working</code> status.
Depending on the server load, it may get picked instantly or even after few hours in extreme cases.</p>

<p>When the job has been executed successfully (which make take up to few minutes), bulk will have <code class="prettyprint">finished</code> status assigned.
Please note that it doesn&rsquo;t mean that members have been successfully processed (there may be even none), you&rsquo;ll need to check bulk status
for errors.</p>

<p>When job failed for some internal reason, it will have either <code class="prettyprint">failed</code> or <code class="prettyprint">waiting_for_retry</code> status. See below
for more details.  </p>

<h4 id="asynchronous-job-failures">Asynchronous job failures</h4>

<p>Jobs that couldn&rsquo;t be processed because of some internal reasons will be retried up to 5 times.</p>

<p>After each failure, the bulk will have <code class="prettyprint">waiting_for_retry</code> status assigned and it&rsquo;s <code class="prettyprint">retries</code> attribute will be incremented.</p>

<p>After 5th failure, the bulk will have <code class="prettyprint">failed</code> status assigned. In such case, please contact us, so we may identify 
and resolve the problem.</p>

<h2 id="send-import-request"><a name="v3-members-imports"></a> Send import request</h2>

<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/imports</code></p>

<p>Creates new members or updates existing ones (based on <code class="prettyprint">msisdn</code> and <code class="prettyprint">e-mail</code> identifiers).</p>

<p>There is a maximum number of members that can be sent in one request (1000). So, if you intend to import more than 
that, you may want to identify all bulks with the same <code class="prettyprint">import_id</code> and pass consequent <code class="prettyprint">request_number</code> to each of them.</p>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
    <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/imports"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
  -d <span class="se">\</span>
    <span class="s1">'{
      "import_id": "import_21",
      "request_number": 3,
      "only_create": false,
      "members": [
        {
          "properties": { "email": "foo@bar.baz" },
          "password": "pass",
          "sms_enabled": true,
          "email_enabled": true,
          "push_enabled": true,
          "optin_channel": true,
          "optin_subchannel": true,
          "created_at": "foo",
          "updated_at": "bar",
          "consents": { "email_marketing": { "status": true } }
        }
      ]
    }'</span>    
</code></pre>
<blockquote>
<p>When successful, JSON will be returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"import_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9a00143-6488-4d4f-87d4-29c2da02d678"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When input is invalid, returns the error object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"duplicated_msisdns"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>import_id</td>
<td>no</td>
<td>auto-generated</td>
<td>When you&rsquo;re making more than one call you can consider adding it. Otherwise it will be auto-generated</td>
<td>String</td>
</tr>
<tr>
<td>request_number</td>
<td>no</td>
<td>-</td>
<td>A number that you can use for bulk identification in &ldquo;Status&rdquo; endpoint. It&rsquo;s up to you to provide it&rsquo;s uniqueness. Useless without specifying <code class="prettyprint">import_id</code></td>
<td>Integer</td>
</tr>
<tr>
<td>members</td>
<td>yes</td>
<td>-</td>
<td>Array with members payloads - See below</td>
<td>Array <JSON Object></td>
</tr>
<tr>
<td>only_create</td>
<td>no</td>
<td>false</td>
<td>When true, it does not update members</td>
<td>Boolean</td>
</tr>
</tbody></table>

<h4 id="members-array">Members Array</h4>

<p>General requirements:</p>

<ul>
<li>all members must have unique identifiers (<code class="prettyprint">msisdn</code> or <code class="prettyprint">email</code>)</li>
<li>maximum number of items in array is 1000</li>
</ul>

<table><thead>
<tr>
<th>Key</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>properties</td>
<td>yes</td>
<td>-</td>
<td>JSON with properties for member (see: <a href="#v3-member-model">Member model</a></td>
<td>JSON Object</td>
</tr>
<tr>
<td>properties[&lsquo;msisdn&rsquo;]</td>
<td>yes*</td>
<td>none</td>
<td>Unique member&rsquo;s msisdn as defined <a href="#msisdn-member-identifier">here</a>) Example: <code class="prettyprint">4740485124</code>.</td>
<td>string</td>
</tr>
<tr>
<td>properties[&lsquo;email&rsquo;]</td>
<td>yes*</td>
<td>none</td>
<td>Member&rsquo;s email</td>
<td>string</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td>null</td>
<td>Members password. Not required, but user may not be able to log in without this</td>
<td>String</td>
</tr>
<tr>
<td>sms_enabled</td>
<td>no</td>
<td>true</td>
<td>Should SMS channel be enabled for member?</td>
<td>Boolean</td>
</tr>
<tr>
<td>email_enabled</td>
<td>no</td>
<td>true</td>
<td>Should email channel be enabled for member?</td>
<td>Boolean</td>
</tr>
<tr>
<td>push_enabled</td>
<td>no</td>
<td>true</td>
<td>Should push channel be enabled for member?</td>
<td>Boolean</td>
</tr>
<tr>
<td>optin_channel</td>
<td>no</td>
<td>&ldquo;import&rdquo;**</td>
<td>Source of member</td>
<td>String</td>
</tr>
<tr>
<td>optin_subchannel</td>
<td>no</td>
<td>import&rsquo;s id**</td>
<td>Subsource of member</td>
<td>String</td>
</tr>
<tr>
<td>consents</td>
<td>no</td>
<td>{}</td>
<td>Members consents</td>
<td>See <a href="#v3-member-consents-model">Member&rsquo;s consents JSON model</a></td>
</tr>
</tbody></table>

<p>&ast; At least one of those properties must be provided</p>

<p>&ast;&ast; When those member attributes are missing on creation, defaults will be used. When on update, they won&rsquo;t be overwritten.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>import_id</td>
<td>Identifier for import status checking (either provided by you or auto-generated)</td>
<td>String</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid payload</td>
<td>Returns error object - see below</td>
</tr>
</tbody></table>

<h4 id="invalid-payload-error-json-object">Invalid Payload Error (JSON object)</h4>

<p>When payload is invalid, an object is returned: <code class="prettyprint">{&quot;error&quot; =&gt; &lt;reason&gt;}</code></p>

<p>Possible reasons are:</p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">duplicated_emails</code></td>
<td>At least two members in payload share same email</td>
</tr>
<tr>
<td><code class="prettyprint">duplicated_msisdns</code></td>
<td>At least two members in payload share same msisdn</td>
</tr>
<tr>
<td><code class="prettyprint">members_size_incorrect</code></td>
<td>Members number in payload exceeds maximum (1000)</td>
</tr>
<tr>
<td><code class="prettyprint">members_empty</code></td>
<td>Payload is empty</td>
</tr>
<tr>
<td><code class="prettyprint">missing_identifier</code></td>
<td>At least one member in payload misses required identifier (depends on Community)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Imports:Create</code> permit
</aside>

<h2 id="get-import-status"><a name="v3-members-imports-status"></a> Get import status</h2>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/imports/:import_id</code></p>

<p>Returns status of import with a list of references to bulks (<code class="prettyprint">id</code> and <code class="prettyprint">request_number</code>). </p>

<p>You need to call <a href="#v3-members-import-bulk-status">Members Imports &bull; Get bulk status</a> to see bulks details.</p>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
    <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/imports/:import_id"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, JSON will be returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"members_in_payloads_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_created_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3020</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_updated_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">531</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_with_validation_errors_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">449</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-30T11:23:08.417Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bulks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">83473</span><span class="p">,</span><span class="w"> </span><span class="s2">"request_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">83474</span><span class="p">,</span><span class="w"> </span><span class="s2">"request_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">83475</span><span class="p">,</span><span class="w"> </span><span class="s2">"request_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"working"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">83476</span><span class="p">,</span><span class="w"> </span><span class="s2">"request_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>import_id</td>
<td>Import identifier</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>members_in_payload_number</td>
<td>A total number of members that were requested for importing</td>
<td>Integer</td>
</tr>
<tr>
<td>members_created_number</td>
<td>A total number of members that were successfully created</td>
<td>Integer</td>
</tr>
<tr>
<td>members_updated_number</td>
<td>A total number of members that were successfully updated</td>
<td>Integer</td>
</tr>
<tr>
<td>members_with_validation_errors_number</td>
<td>A total number of members that had validation errors</td>
<td>Integer</td>
</tr>
<tr>
<td>created_at</td>
<td>The date of import creation</td>
<td>Date</td>
</tr>
<tr>
<td>bulks</td>
<td>A list of bulks in the import</td>
<td>Array<Object>, where Object consists: of <code class="prettyprint">id</code>, <code class="prettyprint">request_number</code> and <code class="prettyprint">status</code> attributes</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Job with such ID wasn&rsquo;t found.</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Imports:Get</code> permit
</aside>

<h2 id="get-bulk-status"><a name="v3-members-imports-bulk-status"></a> Get bulk status</h2>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/imports/:import_id/bulks/:bulk_id</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/members/imports/:import_id/bulks/by_request_number/:request_number</code></p>

<p>Returns status of import bulk.</p>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
    <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/imports/:import_id/bulks/:bulk_id"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, JSON will be returned:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
    </span><span class="s2">"import_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89405ae3-2dd5-46cb-a13b-840bc588199b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"request_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"only_create"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_in_payload_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_created_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_updated_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_with_validation_errors_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"joe@example.com"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w"> 
                              </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_not_match"</span><span class="p">,</span><span class="w">
                              </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pl"</span><span class="p">,</span><span class="w">
                              </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en, no"</span><span class="p">,</span><span class="w">
                              </span><span class="s2">"property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"language"</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-30T17:14:03.738Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>import_id</td>
<td>Import identifier</td>
</tr>
<tr>
<td>bulk_id</td>
<td>ID of the bulk</td>
</tr>
<tr>
<td>request_number</td>
<td>Request number of the bulk</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ID of bulk</td>
<td>Integer</td>
</tr>
<tr>
<td>import_id</td>
<td>Import identifier</td>
<td>String</td>
</tr>
<tr>
<td>request_number</td>
<td>The number of the bulk</td>
<td>Integer</td>
</tr>
<tr>
<td>status</td>
<td>Job status - one of: &lsquo;waiting&rsquo;, &lsquo;working&rsquo;, &lsquo;finished&rsquo;, &lsquo;failed&rsquo; &lsquo;waiting_for_retry&rsquo; - see more <a href="#v3-members-imports-import-flow">here</a> in &ldquo;Bulk statuses&rdquo; section</td>
<td>String</td>
</tr>
<tr>
<td>members_in_payload_number</td>
<td>A number of members that were requested for importing</td>
<td>Integer</td>
</tr>
<tr>
<td>members_created_number</td>
<td>A number of members that were successfully created</td>
<td>Integer</td>
</tr>
<tr>
<td>members_updated_number</td>
<td>A number of members that were successfully updated</td>
<td>Integer</td>
</tr>
<tr>
<td>members_with_validation_errors_number</td>
<td>A number of members that had validation errors</td>
<td>Integer</td>
</tr>
<tr>
<td>retries</td>
<td>A number of background job retries (max 5)</td>
<td>Integer</td>
</tr>
<tr>
<td>members_errors</td>
<td>Members errors. Each invalid member will be returned in this object, where key is his identifier (<code class="prettyprint">email</code> or <code class="prettyprint">msisdn</code>) and the value is a list of it&rsquo;s <a href="#validation-on-members">validation errors</a></td>
<td>Object</td>
</tr>
<tr>
<td>created_at</td>
<td>The date of bulk creation</td>
<td>Date</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Bulk with such ID wasn&rsquo;t found.</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Members:Imports:Get</code> permit
</aside>

          <h1 id="endpoints-push-notifications">Endpoints &bull; Push Notifications</h1>

<h2 id="create"><a name="v3-push-notification-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/push_notifications"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'
    {
      "notifications":[
        {
          "id":"push_1",
          "member_ids":[1, 2],
          "notification":{ "title": "Hey man", "body": "Great offer for you!" }
        },
        {
          "id": "push_2",
          "member_ids": [3],
          "shortening_enabled": true,
          "notification": { "body":"Great offer!" }
        }
      ]
    }
  '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a hash structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push_1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sent"</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_device"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"push_2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w"> </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sent"</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns a hash structured like this:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
    <span class="s2">"error"</span><span class="p">:</span> <span class="s2">"At least one notification is invalid"</span><span class="p">,</span>
    <span class="s2">"notifications_errors"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"notifications[0]"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"notification"</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">"can't be blank"</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">"notifications[1]"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"notification"</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">"can't be blank"</span>
            <span class="p">],</span>
            <span class="s2">"user_assigned_id"</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">"must be a String (but is a Integer)"</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/push_notifications</code></p>

<p>Sends notifications (100 max) to target members.</p>

<p>The notifications are sent from our systems with Firebase API, so for more information on <code class="prettyprint">notification</code> and <code class="prettyprint">data</code> parameters, see <a href="https://firebase.google.com/docs/cloud-messaging/http-server-ref">Firebase docs</a> </p>

<p>Not all target members may be eligible for receiving a push notification (or may not actually exist), so for every recipient 
in every notification a result (<code class="prettyprint">sent|no_device</code>) is returned - see an example on the right</p>

<h3 id="post-parameters-json-array">POST Parameters (JSON array)</h3>

<p>The expected payload consists of <code class="prettyprint">messages</code> object which has array of objects with following attributes:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id*</td>
<td>string</td>
<td>ID of message. It&rsquo;s value is up to you, but we suggest <br /> to make it unique so the messages may be distinguished</td>
</tr>
<tr>
<td>member_ids*</td>
<td>array</td>
<td>IDs of members the notification should be sent to</td>
</tr>
<tr>
<td>shortening_enabled</td>
<td>bool</td>
<td>Should links in payload get shortened with Boostcom Shortener?</td>
</tr>
<tr>
<td>notification*</td>
<td>object</td>
<td>Predefined, user-visible key-value pairs of the notification payload. <br /> For more information, see <a href="https://firebase.google.com/docs/cloud-messaging/http-server-ref#notification-payload-support">Firebase docs</a></td>
</tr>
<tr>
<td>notification[&lsquo;body&rsquo;]</td>
<td>string</td>
<td>Body of push notification</td>
</tr>
<tr>
<td>notification[&lsquo;title&rsquo;]</td>
<td>string</td>
<td>Title to be displayed in push notification</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>Custom key-value pairs of the message&rsquo;s payload. <br /> For more information, see <a href="https://firebase.google.com/docs/cloud-messaging/http-server-ref#data">Firebase docs</a></td>
</tr>
</tbody></table>

<p>* required</p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid payload (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:PushNotifications:Send</code> permit
</aside>

          <h1 id="endpoints-smses">Endpoints &bull; SMSes</h1>

<h2 id="create"><a name="v3-smses-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/smses"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
      "messages": [
        { "id": "message:124", "member_id": 1, "content": "Hello" },
        { "id": "message:125", "member_id": 2, "content": "What is going on?", "sender": "Marvin Gaye" }
      ]
    }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message:1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message:2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_consent"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"message:3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"member_not_found"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid parameters"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"0"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"it must have between 2-11 characters"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"ignore_consents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"must be boolean"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/smses</code></p>

<p>Sends SMSes (100 max) to target members.</p>

<p>Not all target members may be eligible for receiving an SMS, so for every recipient in every notification 
a feedback is returned - see an example on the right.</p>

<p>Please note that successful feedback does not mean that message has been sent right away.
Messages are being sent asynchronously. Also, it cannot be guaranteed that the message will be delivered to user.</p>

<p>In future, a feature for checking messages delivery statuses will be added.</p>

<h3 id="messages-post-parameters-json-array">Messages POST Parameters (JSON array)</h3>

<p>The expected payload consists of <code class="prettyprint">messages</code> object which has array of objects with following attributes:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id *</td>
<td>string</td>
<td>n/a</td>
<td>ID of message. It&rsquo;s value is up to you, but we suggest to make it unique so the messages may be distinguished</td>
</tr>
<tr>
<td>member_id *</td>
<td>integer</td>
<td>n/a</td>
<td>IDs of member the message should be sent to</td>
</tr>
<tr>
<td>content *</td>
<td>string</td>
<td>n/a</td>
<td>The message content</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>Loyalty Club settings will be applied.</td>
<td>Text which will be perceived by user as message sender (2-11 characters).</td>
</tr>
<tr>
<td>ignore_sending_window</td>
<td>bool</td>
<td>false</td>
<td>Should Loyalty Club sending window be ignored?</td>
</tr>
<tr>
<td>ignore_consents</td>
<td>bool</td>
<td>false</td>
<td>Should member consents be ignored?</td>
</tr>
<tr>
<td>ignore_msisdn_verification_status</td>
<td>bool</td>
<td>false</td>
<td>Should member MSISDN verification status be ignored?</td>
</tr>
<tr>
<td>shortening_enabled</td>
<td>bool</td>
<td>true</td>
<td>Should links in payload get shortened with Boostcom Shortener?</td>
</tr>
</tbody></table>

<p>* required</p>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Message has been accepted for sending</td>
</tr>
<tr>
<td>member_not_found</td>
<td>Message with given ID does not exist</td>
</tr>
<tr>
<td>no_consent</td>
<td>Member has no <code class="prettyprint">sms_marketing</code> consent - this may be ignored by enabling <code class="prettyprint">ignore_consents</code> option</td>
</tr>
<tr>
<td>msisdn_missing</td>
<td>Member has no MSISDN</td>
</tr>
<tr>
<td>msisdn_barred</td>
<td>Member&rsquo;s MSISDN is barred</td>
</tr>
<tr>
<td>msisdn_unverified</td>
<td>Member&rsquo;s MSISDN is not verified - this may be ignored by enabling <code class="prettyprint">ignore_msisdn_verification_status</code> option</td>
</tr>
<tr>
<td>channel_disabled</td>
<td>Member has SMS channel disabled</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Smses:Send</code> permit
</aside>

          <h1 id="endpoints-emails">Endpoints &bull; Emails</h1>

<h2 id="create"><a name="v3-emails-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/emails"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{ 
      "emails": {
          "id": "email_1", 
          "content": "Hello",
          "subject": "from api", 
          "from_name":"Boost",
          "from_email":"noreply@boost.no",
          "members_ids": [4175287, 123], 
        }
      }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email_1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4175287</span><span class="p">,</span><span class="w">
      </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email_1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"member_not_found"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid parameters"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"emails"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"members_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"size must be within 1 - 100"</span><span class="w">
            </span><span class="p">],</span><span class="w"> 
            </span><span class="s2">"from_email"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"is in invalid format"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/emails</code></p>

<p>Sends Emails (100 max) to target members.</p>

<p>Not all target members may be eligible for receiving an Email, so for every recipient in every notification 
a feedback is returned - see an example on the right.</p>

<p>Please note that successful feedback does not mean that message has been sent right away.
Messages are being sent asynchronously. Also, it cannot be guaranteed that the message will be delivered to user.</p>

<p>In future, a feature for checking messages delivery statuses will be added.</p>

<h3 id="messages-post-parameters-json-array">Messages POST Parameters (JSON array)</h3>

<p>The expected payload consists of <code class="prettyprint">emails</code> object which has an hash of objects with following attributes:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id *</td>
<td>string</td>
<td>n/a</td>
<td>ID of message. It&rsquo;s value is up to you, but we suggest to make it unique so the messages may be distinguished</td>
</tr>
<tr>
<td>members_ids *</td>
<td>int[]</td>
<td>n/a</td>
<td>IDs of members the message should be sent to</td>
</tr>
<tr>
<td>content *</td>
<td>string</td>
<td>n/a</td>
<td>The message content</td>
</tr>
<tr>
<td>subject*</td>
<td>string</td>
<td>n/a</td>
<td><em>Subject</em> field.</td>
</tr>
<tr>
<td>from_name</td>
<td>string</td>
<td>Loyalty Club settings wil be applied.</td>
<td><em>From</em> field.</td>
</tr>
<tr>
<td>from_email</td>
<td>string</td>
<td>Loyalty Club settings wil be applied.</td>
<td><em>Sender</em> field. Must be a valid (and verified - contact support@boostcom.no in case you don&rsquo;t have any verified domain) email address.</td>
</tr>
<tr>
<td>ignore_consents</td>
<td>bool</td>
<td>false</td>
<td>Should member consents be ignored?</td>
</tr>
<tr>
<td>ignore_email_verification_status</td>
<td>bool</td>
<td>false</td>
<td>Should member Email verification status be ignored?</td>
</tr>
</tbody></table>

<p>* required</p>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Message has been accepted for sending</td>
</tr>
<tr>
<td>member_not_found</td>
<td>Message with given ID does not exist</td>
</tr>
<tr>
<td>no_consent</td>
<td>Member has no <code class="prettyprint">email_marketing</code> consent - this may be ignored by enabling <code class="prettyprint">ignore_consents</code> option</td>
</tr>
<tr>
<td>email_missing</td>
<td>Member has no Email</td>
</tr>
<tr>
<td>email_unsubscribed</td>
<td>Members has unsubscribed from receiving emails</td>
</tr>
<tr>
<td>email_hard_bounced</td>
<td>Member&rsquo;s Email is marked as a hard bounced</td>
</tr>
<tr>
<td>email_unverified</td>
<td>Member&rsquo;s Email is not verified - this may be ignored by enabling <code class="prettyprint">ignore_email_verification_status</code> option</td>
</tr>
<tr>
<td>channel_disabled</td>
<td>Member has Email channel disabled</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>BL:Api:Emails:Send</code> permit
</aside>

          <h1 id="endpoints-offers"><a name="v3-offers"></a>  Endpoints &bull; Offers</h1>

<p>This section describes endpoints destined for end user (e.g. for mobile apps) and work mostly in member context. 
Navigate to <a href="#v3-offers-admin">Offers Admin</a> section to see docs for offers management endpoints.</p>

<p>NOTE: The Offers API is in development state. Changes (rather small) may occur during our mobile apps development &amp; testing process.</p>

<h2 id="common-params">Common params</h2>

<h3 id="preview-query-param"><a name="v3-offers-preview"></a> <code class="prettyprint">preview</code> query param</h3>

<p>It is possible to use some endpoints without authenticated user by adding <code class="prettyprint">preview=true</code> query param.</p>

<p>This allows to preview the endpoint&rsquo;s content without requiring the user to be signed-in.</p>

<p>With this param given, authentication will not be required (<code class="prettyprint">Authorization</code> header may be skipped) and therefore, 
response will be user-agnostic.</p>

<h2 id="common-error-responses">Common error responses</h2>

<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">485</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Offers API is not enabled for the Loyalty Club&quot;}</code></td>
</tr>
</tbody></table>

<h2 id="common-models">Common models</h2>

<h3 id="offer"><a name="v3-offer-model"></a> Offer</h3>

<blockquote>
<p>Offer example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000115</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Buy two shoes, get one jacket"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"external_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/foo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usable_since"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-13T17:32:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usable_until"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"collection_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000016</span><span class="p">,</span><span class="w"> </span><span class="mi">1000017</span><span class="p">],</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"2 + 1"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"stores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"M&amp;H"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000115-offer_default-original.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offer_default"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"read_more"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"button_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button title"</span><span class="p">,</span><span class="w"> </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w"> </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"activation_texts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"modal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Modal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"button"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="s2">"schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"list"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.name"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.stores"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"empty"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inline"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some great offer we have here!"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"liked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_uses"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uses_left"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active_until"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-13T18:41:00.000Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"extras"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>external_url</td>
<td>string</td>
<td>yes</td>
<td>The URL the offer may be linked with</td>
</tr>
<tr>
<td>usable_since</td>
<td>Date</td>
<td>yes</td>
<td>Time since the offer may be used. If null, there is no restriction.</td>
</tr>
<tr>
<td>usable_until</td>
<td>Date</td>
<td>yes</td>
<td>Time until the offer may be used. If null, there is no restriction.</td>
</tr>
<tr>
<td>collection_ids</td>
<td>integer[]</td>
<td>no (may be empty)</td>
<td>List of collections ids the offer belongs to</td>
</tr>
<tr>
<td>tags</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of tags identifiers associated with the offer. Information from <a href="#v3-list-translations">Translations &bull; List</a> should be used to display the tags.</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of shop names associated with the offer</td>
</tr>
<tr>
<td>files</td>
<td>File[]</td>
<td>no</td>
<td>A list of offer files - see <a href="#v3-file-model">File model</a></td>
</tr>
<tr>
<td>liked</td>
<td>Boolean</td>
<td>no</td>
<td>Has offer been liked by user?</td>
</tr>
<tr>
<td>usage</td>
<td>Usage</td>
<td>no</td>
<td>Usage information object - see <a href="#v3-offer-usage-model">Offer usage model</a></td>
</tr>
<tr>
<td>extras</td>
<td>Object</td>
<td>no (may be empty)</td>
<td>Extendable container for any potential extra data</td>
</tr>
<tr>
<td>display</td>
<td>Object</td>
<td>no</td>
<td>Stores display information</td>
</tr>
<tr>
<td>display.schemas</td>
<td>Object</td>
<td>no</td>
<td>Offer displays schemas - see <a href="#v3-offers-display-schemas">Offer display schemas</a></td>
</tr>
<tr>
<td>display.read_more</td>
<td>Object</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.button_title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.url</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more.text</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>display.read_more</td>
<td>Object</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>activation_texts.modal</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>activation_texts.button</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>activation_texts.description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
</tbody></table>

<h3 id="offer-usage"><a name="v3-offer-usage-model"></a> Offer usage</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usable</td>
<td>Boolean</td>
<td>no</td>
<td>Is the offer usable?</td>
</tr>
<tr>
<td>max_uses</td>
<td>integer</td>
<td>yes</td>
<td>Maximum number of times the specific member can use the offer. When null, there&rsquo;s no limit.</td>
</tr>
<tr>
<td>uses_left</td>
<td>integer</td>
<td>yes</td>
<td>How many more times the specific member can use the offer - this number can be also affected by global offer limit. When null, there&rsquo;s no limit.</td>
</tr>
<tr>
<td>active_until</td>
<td>Date</td>
<td>yes</td>
<td>The last time time the offer has been used at+ activation time (configurable per Loyalty Club, e.x. 30s). When null, the offer has not been activated (used) yet</td>
</tr>
</tbody></table>

<h3 id="collection"><a name="v3-offers-collection-model"></a> Collection</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>short_description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>offers_order</td>
<td>integer[]</td>
<td>no (may be empty)</td>
<td>Describes order in which offers should be displayed inside this collection</td>
</tr>
<tr>
<td>files</td>
<td>File[]</td>
<td>no</td>
<td>A list of Offer Files - see <a href="#v3-file-model">File model</a></td>
</tr>
</tbody></table>

<h3 id="display-schemas"><a name="v3-offers-display-schemas"></a> Display schemas</h3>

<blockquote>
<p>Example schemas:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w">
</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"list"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.name"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.stores"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$.description"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"empty"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"caption"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inline"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some great offer we have here!"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w">
</span></code></pre>
<p>Display schemas are the offer attributes that describe how offer is meant to be displayed inside specific 
context - and there are two types of schemas:</p>

<ul>
<li><code class="prettyprint">list</code> - describes how offer should look in an offers list view</li>
<li><code class="prettyprint">details</code> - describes how offer should look in an offer detail view</li>
</ul>

<p>Each schema consists of fields with definitions of content that should be put inside the field - there are three of them:</p>

<ul>
<li><code class="prettyprint">header</code></li>
<li><code class="prettyprint">body</code></li>
<li><code class="prettyprint">caption</code></li>
</ul>

<p>The fields interpretation (how they are utilized by view) is up to API client design and/or specific Loyalty Club standard.</p>

<p>Fields are described by two attributes: <code class="prettyprint">type</code> and <code class="prettyprint">value</code>. 
There are three types of fields:</p>

<ul>
<li><code class="prettyprint">&quot;reference&quot;</code> - some offer attribute should be used for the field content, <code class="prettyprint">value</code> contains <a href="https://support.smartbear.com/readyapi/docs/testing/jsonpath-reference.html">JSONPath</a> reference to element, e.g. <code class="prettyprint">$.name</code><br></li>
<li><code class="prettyprint">&quot;inline&quot;</code> - the field itself contains content that should be placed inside the field, which is stored in the <code class="prettyprint">value</code> attribute</li>
<li><code class="prettyprint">&quot;empty&quot;</code> - the field should not be displayed at all</li>
</ul>

<p>By default (when no schema is defined on offer by it&rsquo;s creator), all of the schema fields are references to:</p>

<ul>
<li><code class="prettyprint">caption</code> =&gt; <code class="prettyprint">stores</code></li>
<li><code class="prettyprint">header</code> =&gt; <code class="prettyprint">name</code></li>
<li><code class="prettyprint">body</code> =&gt; <code class="prettyprint">description</code></li>
</ul>

<h2 id="get-offers-meta"><a name="v3-offers-meta"></a> Get offers meta</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/offers/meta"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"-50%"</span><span class="p">,</span><span class="w"> </span><span class="s2">"great deal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2 + 1"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"stores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"M&amp;H"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Doo Doo"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"collections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000016</span><span class="p">,</span><span class="w">
            </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Collection #1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"short_title"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"offers_order"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000115</span><span class="p">,</span><span class="w"> </span><span class="mi">1000112</span><span class="p">,</span><span class="w"> </span><span class="mi">1000114</span><span class="p">],</span><span class="w">
            </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/collection-1000016-collection_cover_default-original.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection_cover_default"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/collection-1000016-collection_cover_default-thumbnail.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection_cover_default"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/collection-1000016-collection_cover_default-base.jpg"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"collection_cover_default"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"activated_seconds_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/me/offers/meta</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<p>Returns offers metadata which consists of:</p>

<ul>
<li>aggregated lists of records currently associated with offers (stores, tags, collections)</li>
<li>Loyalty Club configuration</li>
</ul>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>preview</td>
<td>Boolean</td>
<td>false</td>
<td>See <a href="#v3-offers-preview"><code class="prettyprint">preview</code> param</a></td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tags</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of unique tags assigned to offers</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of unique stores assigned to offers</td>
</tr>
<tr>
<td>collections</td>
<td>Collection[]</td>
<td>no (may be empty)</td>
<td>List of unique collections assigned to offers - see <a href="#v3-offers-collection-model">Collection model</a></td>
</tr>
<tr>
<td>activated_seconds_time</td>
<td>integer</td>
<td>no</td>
<td>Number of seconds the offers stays active after member uses it</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:GetMeta</code> permit
</aside>

<h2 id="get-offer"><a name="v3-get-offer"></a> Get offer</h2>

<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/me/offers/:id</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/offers/1000016"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an Offer object under &ldquo;offer&rdquo; key. See <a href="#v3-offer-model">Offer model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns details of the specified offer.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>preview</td>
<td>Boolean</td>
<td>false</td>
<td>See <a href="#v3-offers-preview"><code class="prettyprint">preview</code> param</a></td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td>Offer</td>
<td>no</td>
<td>See <a href="#v3-offer-model">Offer model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Get</code> permit
</aside>

<h2 id="list-offers"><a name="v3-list-offers"></a> List offers</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/offers"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a list of offers and pagination info. 
  See <a href="#v3-offer-model">Offer model</a> and <a href="#pagination-json-model">Pagination info model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Pagination</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/me/offers</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<p>Returns offers list.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>100</td>
<td>Number of results to be returned per request (100 is the maximum)</td>
</tr>
<tr>
<td>page_no</td>
<td>integer</td>
<td>1</td>
<td>Number of results page</td>
</tr>
<tr>
<td>preview</td>
<td>boolean</td>
<td>false</td>
<td>See <a href="#v3-offers-preview"><code class="prettyprint">preview</code> param</a></td>
</tr>
<tr>
<td>include_pagination_info</td>
<td>boolean</td>
<td>false</td>
<td>When true, pagination info (containing info like total records count, next page) will be returned</td>
</tr>
<tr>
<td>order_by</td>
<td>string</td>
<td>&ldquo;name&rdquo;</td>
<td>See <a href="#v3-offers-list-order-by"><code class="prettyprint">order_by</code> param</a></td>
</tr>
<tr>
<td>collection_ids</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers belonging to least one of given collections will be returned</td>
</tr>
<tr>
<td>tags</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given tags will be returned</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given stores will be returned</td>
</tr>
<tr>
<td>campaign_id</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers with this campaign_id will be returned</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>null</td>
<td>When present, only offers that match the query string will be returned</td>
</tr>
<tr>
<td>usable</td>
<td>boolean</td>
<td>false</td>
<td>When true, only offers that are usable will be returned</td>
</tr>
<tr>
<td>liked</td>
<td>boolean</td>
<td>false</td>
<td>When true, only offers that have been liked by member</td>
</tr>
</tbody></table>

<p>All parameters are optional.</p>

<h4 id="order_by-param"><a name="v3-offers-list-order-by"></a> <code class="prettyprint">order_by</code> param</h4>

<p>Offers list may be sorted by <code class="prettyprint">order_by</code> param, which has similar syntax as ORDER BY keyword in SQL statements.</p>

<p>For example <code class="prettyprint">order_by=usable ASC, created_at DESC</code> will return offers sorted by their usability, then by their creation date.</p>

<p>Following offer attributes may be used for sorting  in general:</p>

<ul>
<li>name</li>
<li>usable_since</li>
<li>usable_until</li>
<li>created_at</li>
</ul>

<p>In member context (without <code class="prettyprint">preview=true</code> param): </p>

<ul>
<li>usable </li>
<li>uses_left</li>
<li>liked </li>
</ul>

<p>Also, when querying offers by <em>single</em> collection_id, the list may also be sorted by:</p>

<ul>
<li>collection_position</li>
</ul>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>Offer[]</td>
<td>no (may be empty)</td>
<td>See <a href="#v3-offer-model">Offer model</a></td>
</tr>
<tr>
<td>pagination_info</td>
<td>PaginationInfo</td>
<td>yes</td>
<td>See <a href="#pagination-json-model">Pagination info model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:ListVisible</code> permit
</aside>

<h2 id="use-offer"><a name="v3-use-offer"></a> Use offer</h2>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/offers/1000016"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
    {
      "authorization_token": "a1cc4e0b3ab54b7d8"
    }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a Offer usage object - See <a href="#v3-offer-usage-model">Offer usage model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_uses"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="s2">"uses_left"</span><span class="p">:</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w">
        </span><span class="s2">"active_until"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-08T14:47:22.323Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/infinity-mall/members/me/offers/:id/use</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<p>Uses (activates) the offer by member.</p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authorization_token</td>
<td>string</td>
<td>yes</td>
<td>See <a href="#v3-offer-use-authorization">below</a></td>
</tr>
</tbody></table>

<h4 id="offer-use-authorization"><a name="v3-offer-use-authorization"></a> Offer use authorization</h4>

<p>Some features (like Rewards Program) may require from member to provide some code (scanned QR code, for example), so we can register
his physical presence in the store.</p>

<p>When token is not provided, the offer use is processed as usual, except that some benefits (like Rewards points)
tied to it may not be granted to the member.</p>

<p>However, when token is provided and happens to be invalid, the offer use is not registered, and 422 error (see below) is returned.  </p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usage</td>
<td>OfferUsage</td>
<td>See <a href="#v3-offer-usage-model">Offer usage model</a></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Offer#10000951 not found&quot;}</code></td>
<td>-</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Already active&quot;}</code></td>
<td>The offer has been just used</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Not granted&quot;}</code></td>
<td>The offer has not been purchased by member</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Usage authorization token invalid&quot;}</code></td>
<td>Provided usage token is invalid</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;User limit exceeded&quot;}</code></td>
<td>There are no more offers available to purchase for the member</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Global limit exceeded&quot;}</code></td>
<td>There are no more offers available globally (stock is empty)</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Not in usable timeframes&quot;}</code></td>
<td>Offer is not usable yet or anymore</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Use</code> permit
</aside>

<h2 id="like-offer"><a name="v3-like-offer"></a> Like offer</h2>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/offers/1000016/like"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/infinity-mall/members/me/offers/:id/like</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<p>Marks offer as &ldquo;liked&rdquo; by user.</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Like</code> permit
</aside>

<h2 id="unlike-offer"><a name="v3-unlike-offer"></a> Unlike offer</h2>

<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/offers/1000016/unlike"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/infinity-mall/members/me/offers/:id/unlike</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<p>Marks offer as &ldquo;unliked&rdquo; by user.</p>

<aside class="notice">
Requires <code>Offers:Api:MemberOffers:Like</code> permit
</aside>

          <h1 id="endpoints-offers-events"><a name="v3-offers-events"></a>  Endpoints &bull; Offers Events</h1>

<h2 id="offerevent-model"><a name="v3-offer-event-model"></a> OfferEvent model</h2>

<blockquote>
<p>Offer Event example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"offer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-08-27T10:20:11.810Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"collections_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w">
        </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"t1"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"stores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"a"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"search_string"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"utm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campaign-2018-05-01"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer_id</td>
<td>integer</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>created_at</td>
<td>Date</td>
<td>yes</td>
<td>Date of the event occurrence</td>
</tr>
<tr>
<td>context</td>
<td>Object</td>
<td>no</td>
<td>Context of the event occurrence.</td>
</tr>
<tr>
<td>context.collections_ids</td>
<td>Array<ID></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.tags</td>
<td>Array<string></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.stores</td>
<td>Array<string></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.search_string</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>context.utm</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>

<p>Context describes in what circumstances the event has occurred. 
For example, member clicked on a coupon that was displayed inside collection, the context should include this collection_id. </p>

<h2 id="clicked"><a name="v3-offers-clicked"></a> Clicked</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers/events/offers_clicked"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -d <span class="s1">'
    {
        "events": [
            {
                "offer_id": "14",
                "created_at": "2019-08-27T10:20:11.810Z",
                "context": {
                    "collections_ids": [1, 2],
                    "tags": ["t1"],
                    "stores": ["a"],
                    "search_string": "foo",
                    "utm": "campaign-2018-05-01"
                }
            }
        ]

    }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/infinity-mall/offers/events/offers_clicked</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<p>Registers that OAuth member clicked on given offers.</p>

<h3 id="post-parameters">Post Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>events</td>
<td>Array<OfferEvent></td>
<td>See <a href="#v3-offer-event-model">Offer Event</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Events:Clicked</code> permit
</aside>

<h2 id="seen"><a name="v3-offers-seen"></a> Seen</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers/events/offers_seen"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -d <span class="s1">'
    {
        "events": [
            {
                "offer_id": "14",
                "created_at": "2019-08-27T10:20:11.810Z",
                "context": {
                    "collections_ids": [1, 2],
                    "tags": ["t1"],
                    "stores": ["a"],
                    "search_string": "foo",
                    "utm": "campaign-2018-05-01"
                }
            }
        ]

    }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/infinity-mall/offers/events/offers_seen</code> [<a href="#v3-oauth2">OAuth</a>]</p>

<p>Registers that OAuth member saw given offers.</p>

<aside class="warning">
Seen events are automatically tracked when displaying offer image/file within member context. Make sure you are not duplicating events!
</aside>

<h3 id="post-parameters">Post Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>events</td>
<td>Array <OfferEvent></td>
<td>See <a href="#v3-offer-event-model">Offer Event</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Events:Seen</code> permit
</aside>

          <h1 id="endpoints-offers-admin-wip"><a name="v3-offers-admin"></a> Endpoints &bull; Offers Admin (WIP)</h1>

<p>This section describes endpoints destined for offers management. 
Navigate to <a href="#v3-offers">Offers</a> section to see docs for member-related endpoints.</p>

<p>NOTE: The Offers Admin API is in development state. Changes (rather small) may occur during our mobile apps development &amp; testing process.</p>

<h2 id="common-error-responses">Common error responses</h2>

<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">485</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Offers API is not enabled for the Loyalty Club&quot;}</code></td>
</tr>
</tbody></table>

<h2 id="common-models">Common models</h2>

<h3 id="offer"><a name="v3-admin-offer-model"></a> Offer</h3>

<blockquote>
<p>Offer example:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000115</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Buy two shoes, get one jacket"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"external_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/foo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"read_more"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"button_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button title"</span><span class="p">,</span><span class="w"> </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w"> </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Text"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"usable_since"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-13T17:32:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usable_until"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"collection_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000016</span><span class="p">,</span><span class="w"> </span><span class="mi">1000017</span><span class="p">],</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"2 + 1"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"stores"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"M&amp;H"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000115-offer_default-original.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offer_default"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"liked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_uses"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uses_left"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active_until"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-13T18:41:00.000Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"extras"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>internal_name</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>internal_description</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>external_url</td>
<td>string</td>
<td>yes</td>
<td>The URL the offer may be linked with</td>
</tr>
<tr>
<td>read_more</td>
<td>Object</td>
<td>no</td>
<td>Additional offer display data</td>
</tr>
<tr>
<td>read_more.button_title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>read_more.url</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>read_more.title</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>read_more.text</td>
<td>string</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td>enum: <code class="prettyprint">[&#39;draft&#39;, &#39;published&#39;]</code></td>
<td>no</td>
<td>Offer is visible only when status is <code class="prettyprint">&#39;published&#39;</code></td>
</tr>
<tr>
<td>usable_since</td>
<td>Date</td>
<td>yes</td>
<td>Time since the offer may be used. If null, there is no restriction.</td>
</tr>
<tr>
<td>usable_until</td>
<td>Date</td>
<td>yes</td>
<td>Time until the offer may be used. If null, there is no restriction.</td>
</tr>
<tr>
<td>visible_since</td>
<td>Date</td>
<td>yes</td>
<td>Time since the offer is visible to members. If null, there is no restriction.</td>
</tr>
<tr>
<td>visible_until</td>
<td>Date</td>
<td>yes</td>
<td>Time until the offer is visible to members. If null, there is no restriction.</td>
</tr>
<tr>
<td>collection_ids</td>
<td>integer[]</td>
<td>no (may be empty)</td>
<td>List of collections ids the offer belongs to</td>
</tr>
<tr>
<td>tags</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of tags identifiers associated with the offer. Information from <a href="#v3-list-translations">Translations &bull; List</a> should be used to display the tags.</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>no (may be empty)</td>
<td>List of stores names associated with the offer. See <a href="#v3-store-list">Stores &bull; List</a>.</td>
</tr>
<tr>
<td>audience_id</td>
<td>Integer</td>
<td>yes</td>
<td>DMP&rsquo;s audience ID. If it is set, the offer is available only to members belonging to this audience</td>
</tr>
<tr>
<td>campaign_id</td>
<td>Integer</td>
<td>yes</td>
<td>MPC&rsquo;s campaign ID</td>
</tr>
<tr>
<td>files</td>
<td>File[]</td>
<td>no</td>
<td>A list of offer files - see <a href="#v3-file-model">File model</a></td>
</tr>
<tr>
<td>extras</td>
<td>Object</td>
<td>no (may be empty)</td>
<td>Extendable container for any potential extra data</td>
</tr>
<tr>
<td>display_schemas</td>
<td>Object</td>
<td>no</td>
<td>Offer displays schemas - see <a href="#v3-offers-display-schemas">Offer display schemas</a></td>
</tr>
<tr>
<td>maximum_uses_per_user</td>
<td>Integer</td>
<td>yes</td>
<td>Limit of of uses individual member may perform. When empty, there&rsquo;s no limit.</td>
</tr>
<tr>
<td>stock</td>
<td>Integer</td>
<td>yes</td>
<td>Global limit of member uses. When empty, there&rsquo;s no limit.</td>
</tr>
<tr>
<td>created_at</td>
<td>Date</td>
<td>no</td>
<td>When the offer has been created</td>
</tr>
<tr>
<td>updated_at</td>
<td>Date</td>
<td>no</td>
<td>Last time when the offer has been updated</td>
</tr>
<tr>
<td>archived_at</td>
<td>Date</td>
<td>yes</td>
<td>Time when the offer has been archived</td>
</tr>
<tr>
<td>uses_count</td>
<td>Date</td>
<td>no</td>
<td>Total number of times the offer has been used by members</td>
</tr>
</tbody></table>

<h3 id="offerpayload"><a name="v3-admin-offer-payload"></a> OfferPayload</h3>

<p>Following Offer attributes (described above) are available to set when creating or updating offers.</p>

<ul>
<li>name</li>
<li>description</li>
<li>internal_name</li>
<li>internal_description</li>
<li>external_url</li>
<li>read_more</li>
<li>status</li>
<li>usable_since</li>
<li>usable_until</li>
<li>visible_since</li>
<li>visible_until</li>
<li>collection_ids</li>
<li>tags</li>
<li>stores</li>
<li>audience_id</li>
<li>campaign_id</li>
<li>extras</li>
<li>display_schemas</li>
<li>maximum_uses_per_user</li>
<li>stock</li>
</ul>

<h2 id="get-offer"><a name="v3-get-offer"></a> Get offer</h2>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/offers/:id</code></p>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers/1000016"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an Offer object under &ldquo;offer&rdquo; key. See <a href="#v3-admin-offer-model">Offer model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns details of the specified offer.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer</td>
<td>Offer</td>
<td>no</td>
<td>See <a href="#v3-admin-offer-model">Offer model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Get</code> permit
</aside>

<h2 id="list-offers"><a name="v3-list-offers"></a> List offers</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a list of offers and pagination info. 
  See <a href="#v3-admin-offer-model">Offer model</a> and <a href="#pagination-json-model">Pagination info model</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"offers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Offer</span><span class="w"> </span><span class="err">model</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">Pagination</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">model</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/offers</code></p>

<p>Returns offers list.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>100</td>
<td>Number of results to be returned per request (100 is the maximum)</td>
</tr>
<tr>
<td>page_no</td>
<td>integer</td>
<td>1</td>
<td>Number of results page</td>
</tr>
<tr>
<td>include_total</td>
<td>boolean</td>
<td>false</td>
<td>When true, detailed pagination info (containing info like total records count, next page) will be returned</td>
</tr>
<tr>
<td>sort_by</td>
<td>string</td>
<td>&ldquo;name&rdquo;</td>
<td>What attribute should results be sorted by? Supported attributes are: <code class="prettyprint">[&quot;name&quot;, &quot;usable_since&quot;, &quot;usable_until&quot;, &quot;visible_since&quot;, &quot;visible_until&quot;, &quot;created_at&quot;, &quot;updated_at&quot;, &quot;archived_at&quot;]</code></td>
</tr>
<tr>
<td>sort_direction</td>
<td>string</td>
<td>&ldquo;asc&rdquo;</td>
<td>Direction of sorting: &ldquo;asc&rdquo; or &ldquo;desc&rdquo;</td>
</tr>
<tr>
<td>collection_ids</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers belonging to least one of given collections will be returned</td>
</tr>
<tr>
<td>tags</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given tags will be returned</td>
</tr>
<tr>
<td>stores</td>
<td>string[]</td>
<td>null</td>
<td>When present, only offers having at least one of given stores will be returned</td>
</tr>
<tr>
<td>campaign_id</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers with this campaign_id will be returned</td>
</tr>
<tr>
<td>audience_id</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers with this audience_id will be returned</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>null</td>
<td>When present, only offers that match the query string will be returned</td>
</tr>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>null</td>
<td>When present, only offers having one of provided IDs will be returned</td>
</tr>
<tr>
<td>without_collection</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without collections will be returned</td>
</tr>
<tr>
<td>without_tag</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without tags will be returned</td>
</tr>
<tr>
<td>without_audience_id</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without audiences will be returned</td>
</tr>
<tr>
<td>without_campaign_id</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without campaigns will be returned</td>
</tr>
<tr>
<td>without_shop</td>
<td>boolean</td>
<td>false</td>
<td>When present, only offers without stores will be returned</td>
</tr>
<tr>
<td>with_archived</td>
<td>boolean</td>
<td>false</td>
<td>When present, also archived offers will be returned</td>
</tr>
<tr>
<td>only_archived</td>
<td>boolean</td>
<td>false</td>
<td>When present, only archived offers will be returned</td>
</tr>
</tbody></table>

<p>All parameters are optional.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>Offer[]</td>
<td>no (may be empty)</td>
<td>See <a href="#v3-admin-offer-model">Offer model</a></td>
</tr>
<tr>
<td>pagination_info</td>
<td>PaginationInfo</td>
<td>no</td>
<td>See <a href="#pagination-json-model">Pagination info model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:List</code> permit
</aside>

<h2 id="create-offers"><a name="v3-create-offers"></a> Create offers</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "offers":[
                {
                    "name": "Offer 1"
                },
                {
                    "name": "Offer 2"
                }
            ]
        }
    '</span>
</code></pre>
<blockquote>
<p>Returns object structured like this: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"collection_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"list must contain unique values"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000284</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/offers</code></p>

<p>Creates offer(s) with given lists of attributes (OfferPayloads). </p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>OfferPayload[]</td>
<td>List of offers to create. See <a href="#v3-admin-offer-payload">Offer payload</a></td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>True if any offer has been created</td>
</tr>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>IDs of offers that have been created</td>
</tr>
<tr>
<td>errors</td>
<td>Object</td>
<td>Errors of offers that couldn&rsquo;t be created</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Create</code> permit
</aside>

<h2 id="update-offers"><a name="v3-update-offers"></a> Update offers</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "offers":[
                {
                    "id": 1000284,
                    "name": "Offer 1"
                },
                {
                    "id": 1000285,
                    "name": "Offer 2"
                }
            ]
        }
    '</span>
</code></pre>
<blockquote>
<p>Returns object structured like this: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"collection_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"list must contain unique values"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/offers</code></p>

<p>Updates offer(s) with given lists of attributes (OfferPayloads). Also, each payload record must contain offer ID that is meant to be updated.
Update is not partial, so all attributes that aren&rsquo;t present in the payload will be nullified. </p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offers</td>
<td>OfferPayload[]</td>
<td>List of offers to update. See <a href="#v3-admin-offer-payload">Offer payload</a>.</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>True if any offer has been created</td>
</tr>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>IDs of offers that have been created</td>
</tr>
<tr>
<td>errors</td>
<td>Object</td>
<td>Errors of offers that couldn&rsquo;t be created</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Update</code> permit
</aside>

<h2 id="clone-offers"><a name="v3-clone-offers"></a> Clone offers</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers/clone"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "ids":[1000284, 1000285]
        }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns IDs of offers that were created by cloning </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1000301</span><span class="p">,</span><span class="w"> </span><span class="mi">1000302</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/offers/clones</code></p>

<p>Clones given offers (by their IDs)</p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>List of offers ids to clone</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>IDs of offers that have been cloned</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Clone</code> permit
</aside>

<h2 id="delete-offers"><a name="v3-update-offers"></a> Delete offers</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/offers"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
    -d <span class="s1">'
        {
            "ids":[1000284, 1000285]
        }
    '</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>DELETE</strong> <code class="prettyprint">v3/:loyalty_club_slug/offers</code></p>

<p>Deletes given offers (by their IDs).</p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>integer[]</td>
<td>List of offers ids to delete</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Offers:Api:Offers:Destroy</code> permit
</aside>

          <h1 id="endpoints-rewards-program">Endpoints &bull; Rewards Program</h1>

<h2 id="introduction">Introduction</h2>

<p>Boostcom Rewards is a Loyalty Program that awards members for achieving some defined goals with points.</p>

<p>The points may be spent on acquiring (purchasing) special rewards and then using them.
Points may expire after some time.</p>

<p>Participation in program is optional, so member can enroll (join) to it and leave it.</p>

<h3 id="achievements">Achievements</h3>

<p>Every Loyalty Club that has Boostcom Rewards enabled, has defined list of achievements that have rules attached to them.
The rules are described below.</p>

<h3 id="achievements"><a name="v3-rewards-program-achievements"></a> Achievements</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>see <a href="#v3-rewards-program-achievement-types">Achievement types</a></td>
</tr>
<tr>
<td>points</td>
<td>integer</td>
<td>How many points the achievement grants</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>Maximum number of times the member can have the achievement granted (when null, there&rsquo;s no limit)</td>
</tr>
<tr>
<td>frequency</td>
<td>Object</td>
<td>How often the achievement may be granted to member (when null, there are no constraints). For example, achievement with frequency defined as <code class="prettyprint">{&quot;timespan&quot;: &quot;day&quot;, &quot;limit&quot;: 5}</code> means that member may get points for it at most 5 times a day.</td>
</tr>
<tr>
<td>frequency[&lsquo;timespan&rsquo;]</td>
<td>string</td>
<td>One of: <code class="prettyprint">[&#39;hour&#39;, &#39;day&#39;, &#39;week&#39;, &#39;month&#39;, &#39;year&#39;]</code></td>
</tr>
<tr>
<td>frequency[&lsquo;limit&rsquo;]</td>
<td>integer</td>
<td></td>
</tr>
</tbody></table>

<h3 id="achievement-types"><a name="v3-rewards-program-achievement-types"></a> Achievement types</h3>

<table><thead>
<tr>
<th>type</th>
<th>Event</th>
</tr>
</thead><tbody>
<tr>
<td>app_opened</td>
<td>The member opened the loyalty club mobile application</td>
</tr>
<tr>
<td>coupon_used</td>
<td>Member used some coupon</td>
</tr>
<tr>
<td>link_clicked</td>
<td>Member clicked on link that has been sent from us</td>
</tr>
<tr>
<td>email_opened</td>
<td>Member opened an email that has been sent from us</td>
</tr>
<tr>
<td>push_opened</td>
<td>Member opened a push message that has been sent from us</td>
</tr>
<tr>
<td>wifi_approached</td>
<td>Member approached (logged in to) loyalty club&rsquo;s WiFi</td>
</tr>
<tr>
<td>geofence_approached</td>
<td>Member approached geofence defined by loyalty club mobile application</td>
</tr>
<tr>
<td>beacon_approached</td>
<td>Member approached one of loyalty club&rsquo;s beacons</td>
</tr>
<tr>
<td>consent_granted</td>
<td>Member granted one of loyalty club&rsquo;s consents</td>
</tr>
</tbody></table>

<h3 id="member-levels"><a name="v3-rewards-program-levels-program"></a> Member levels</h3>

<blockquote>
<p>Example configuration for regular levels</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regular"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"levels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"points_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"points_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"points_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"points_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example configuration for virtual level</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"virtual_level"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"maximum_points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Loyalty Club may have members level defined (available in <a href="#v3-rewards-program-info">Rewards Program &bull; Get info</a> response).
There are two types of them: <code class="prettyprint">regular</code> and <code class="prettyprint">virtual_level</code>.</p>

<h4 id="regular-levels">Regular levels</h4>

<p>When regular levels are enabled, members get levels based on the amount of points that they have earned 
in program (in <strong>total</strong>, not the current balance) and may need to have minimal level to purchase some rewards. </p>

<p>Each level has <code class="prettyprint">points_threshold</code> value (integer) that describes how many points are needed to reach the level (first level always requires 0 points to have).
Levels are returned in ascending order, sorted by the <code class="prettyprint">points_threshold</code> attribute. </p>

<h4 id="single-virtual-level">Single virtual level</h4>

<p>When single virtual level is enabled, it is just used to show member how he performs in the Rewards Program.</p>

<p>It defines <code class="prettyprint">maximum_points</code> value, that is meant to be compared with member&rsquo;s <strong>current</strong> points balance.</p>

<h2 id="common-error-responses">Common error responses</h2>

<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">480</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Member is not participating in Rewards Program&quot;}</code></td>
</tr>
<tr>
<td><code class="prettyprint">481</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Rewards Program is not enabled for the Loyalty Club&quot;}</code></td>
</tr>
</tbody></table>

<h2 id="get-info"><a name="v3-rewards-program-info"></a> Get info</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/rewards-program/info"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"achievements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app_opened"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
      </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"timespan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"consent_granted"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"points"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"levels_program"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regular"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"levels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"points_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"points_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"points_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"reward_activation_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/rewards-program/info</code></p>

<p>Returns information about Rewards Program in Loyalty Club. </p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>achievements</td>
<td>Array<Achievement></td>
<td>List of Achievement objects - see <a href="#v3-rewards-program-achievements">Achievements</a></td>
</tr>
<tr>
<td>reward_activation_time</td>
<td>integer</td>
<td>Time in seconds describing how long the reward is active after use</td>
</tr>
<tr>
<td>levels_program</td>
<td>object</td>
<td>Definition of member levels - see <a href="#v3-rewards-program-levels-program">Levels</a>. When null, there are no levels.</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Rewards:Api:Program:GetInfo</code> permit
</aside>

<h2 id="join"><a name="v3-rewards-program-join"></a> Join</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/join"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/join</code></p>

<p>Registers current member in Rewards Program. This results granting &ldquo;rewards_enrollment&rdquo; consent to user.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Memberships:Create</code> permit
</aside>

<h2 id="leave"><a name="v3-rewards-program-leave"></a> Leave</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/leave"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>DELETE</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/leave</code></p>

<p>Removes current member from Rewards Program. This results in removing &ldquo;rewards_enrollment&rdquo; consent from member
and <strong>deletion of all points and transaction from Rewards Program.</strong></p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Memberships:Delete</code> permit
</aside>

<h2 id="get-status"><a name="v3-rewards-program-status"></a> Get status</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/status"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"membership"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"membership_started_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-15T12:43:22:41063Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_purchase"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-15T08:00:15063Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-20</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"reward_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Toaster"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expiration"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-14T08:00:15063Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-110</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"achievement"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-10T08:00:15063Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"achievement_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app_opened"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"correction"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-05T08:00:15063Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"comment"</span><span class="p">:</span><span class="w">  </span><span class="s2">"Just for you"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"achievement"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-06-41T08:00:15063Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">110</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-15T08:00:15063Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"achievement_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coupon_used"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2050</span><span class="p">,</span><span class="w">
    </span><span class="s2">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prev_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_first_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_last_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"is_out_of_range"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">  
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When member hasn&rsquo;t joined the program, returns a response having only one key:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"membership"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/status</code></p>

<p>Returns Rewards Program status for current member.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>no</td>
<td>1000</td>
<td>Number of transactions to be returned per request (1000 is the maximum)</td>
</tr>
<tr>
<td>page</td>
<td>integer</td>
<td>no</td>
<td>1</td>
<td>Number of transactions page</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>membership</td>
<td>boolean</td>
<td>Does member participate the Rewards Program?</td>
</tr>
<tr>
<td>membership_started_at</td>
<td>Date</td>
<td>When the member joined the Rewards Program</td>
</tr>
<tr>
<td>balance</td>
<td>integer</td>
<td>Member&rsquo;s current points number</td>
</tr>
<tr>
<td>transactions</td>
<td>Array</td>
<td>List of Transactions objects, ordered by date descending. See below</td>
</tr>
<tr>
<td>pagination_info</td>
<td>Object</td>
<td><a href="#v3-pagination-model">Pagination</a> object describing transactions list</td>
</tr>
</tbody></table>

<h3 id="transaction-object">Transaction object</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>One of: &lsquo;achievement&rsquo;, &lsquo;reward_purchase&rsquo;, &lsquo;expiration&rsquo; and &lsquo;correction&rsquo;</td>
<td>see &ldquo;Transaction types&rdquo; below</td>
</tr>
<tr>
<td>date</td>
<td>Date</td>
<td>When the transaction has been made</td>
</tr>
<tr>
<td>amount</td>
<td>integer</td>
<td>How many points the transaction added or subtracted</td>
</tr>
<tr>
<td>expired_at</td>
<td>Date</td>
<td>(optional) When the points granted by the transaction expired. When null, they&rsquo;re not expired</td>
</tr>
<tr>
<td>details</td>
<td>Object</td>
<td>Transaction-specific details - see &ldquo;Transaction details&rdquo; below</td>
</tr>
</tbody></table>

<h3 id="transaction-types">Transaction types</h3>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>achievement</td>
<td>Addition of points triggered by fulfilling an achievement goal</td>
</tr>
<tr>
<td>reward_purchase</td>
<td>Reduction of points caused by purchasing a reward by member</td>
</tr>
<tr>
<td>expiration</td>
<td>Reduction of points caused by automatic expiration of old transactions</td>
</tr>
<tr>
<td>correction</td>
<td>Change of points caused by admin&rsquo;s manual correction</td>
</tr>
</tbody></table>

<h3 id="transaction-details">Transaction details</h3>

<p>Depending on transaction type, the details contain different kind of data.</p>

<table><thead>
<tr>
<th>Transaction type</th>
<th>Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>achievement</td>
<td>achievement_type</td>
<td>Type of achievement that granted the points - see <a href="#v3-rewards-program-achievement-types">Achievement types</a></td>
</tr>
<tr>
<td>reward_purchase</td>
<td>reward_name</td>
<td>Name of reward that the points have been spent on</td>
</tr>
<tr>
<td>correction</td>
<td>comment</td>
<td>(optional) Admin&rsquo;s notes</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Memberships:CheckStatus</code> permit
</aside>

<h2 id="get-status-by-member-id"><a name="v3-rewards-program-status-by-member-id"></a> Get status by member ID</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/837182/rewards-program/status"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns response as in <a href="$v3-rewards-program-status">Rewards Program &bull; Get Status</a></p>
</blockquote>

<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/:id/rewards-program/status</code></p>

<p>Returns Rewards Program status for member identified by given ID.
Works just the same as <a href="#v3-rewards-program-status">Rewards Program &bull; Get Status</a>.</p>

<aside class="notice">
Requires <code>Rewards:Api:Memberships:CheckStatus</code> permit
</aside>

<h2 id="achievements-summary"><a name="v3-rewards-program-achievements-summary"></a> Achievements summary</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/status/achievements_summary"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"achievements_by_type"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"app_opened"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"times_achieved"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_amount_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"beacon_approached"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"times_achieved"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_amount_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"link_clicked"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"times_achieved"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_amount_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"achievements_by_month"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2019</span><span class="p">,</span><span class="w">
            </span><span class="s2">"month"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"achievements_made"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_amount_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2019</span><span class="p">,</span><span class="w">
            </span><span class="s2">"month"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"achievements_made"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_amount_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">950</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2018</span><span class="p">,</span><span class="w">
            </span><span class="s2">"month"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="s2">"achievements_made"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_amount_earned"</span><span class="p">:</span><span class="w"> </span><span class="mi">580</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">another</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="err">months</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/status/achievements_summary</code></p>

<p>Returns a summary for achievements made by member, grouped by type and month.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required?</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>months_no</td>
<td>integer</td>
<td>no</td>
<td>12</td>
<td>Number of last months to fetch. Must be in (0..999) range</td>
</tr>
</tbody></table>

<h3 id="achievement-by-type-json-object">Achievement by type JSON object</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>See: <a href="#v3-rewards-program-achievement-types">Achievement types</a></td>
</tr>
<tr>
<td>times_achieved</td>
<td>integer</td>
<td>Number of times member made the achievements of this type</td>
</tr>
<tr>
<td>total_amount_earned</td>
<td>integer</td>
<td>Sum of points member get with this achievement type</td>
</tr>
</tbody></table>

<h3 id="achievement-by-month-json-object">Achievement by month JSON object</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>year</td>
<td>integer</td>
<td>four-digit year, e.x. 2019</td>
</tr>
<tr>
<td>month</td>
<td>integer</td>
<td>1-12</td>
</tr>
<tr>
<td>achievements_made</td>
<td>integer</td>
<td>Number of achievements made by member in that month</td>
</tr>
<tr>
<td>total_amount_earned</td>
<td>integer</td>
<td>Sum of points member achieved in that month</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Memberships:CheckStatus</code> permit
</aside>

          <h1 id="endpoints-rewards">Endpoints &bull; Rewards</h1>

<h2 id="list"><a name="v3-rewards-list"></a> List</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/rewards"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"rewards"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000062</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Toaster"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"It has incredible features."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="s2">"required_member_level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"remaining_stock"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000062-default-mobile.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
          </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_default"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000062-default-mobile.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_default"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000062-default-mobile.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_default"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="w">
        </span><span class="p">}</span><span class="w">                
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/rewards</code></p>

<p>Returns list of rewards available to purchase by member.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>rewards</td>
<td>Array</td>
<td>List of Rewards - see below</td>
</tr>
</tbody></table>

<h3 id="reward"><a name="v3-reward-model"></a> Reward</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>(optional)</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(optional)</td>
</tr>
<tr>
<td>price</td>
<td>integer</td>
<td>Number of points that must be spent to purchase the reward</td>
</tr>
<tr>
<td>required_member_level</td>
<td>string</td>
<td>(optional) Minimal level name the members needs to have to be able to purchase the reward. See <a href="#v3-rewards-program-levels-program">Levels</a></td>
</tr>
<tr>
<td>remaining_stock</td>
<td>integer</td>
<td>(optional) Number of items that is available for purchase. When null, there is no limit</td>
</tr>
<tr>
<td>files</td>
<td>Array</td>
<td>A list of Reward Files - see <a href="#v3-file-model">File model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Rewards:List</code> permit
</aside>

<h2 id="list-purchased"><a name="v3-rewards-list-purchased"></a> List purchased</h2>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/rewards/purchased"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"rewards"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000062</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome Toaster"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"It has incredible features."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000062-default-mobile.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
          </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_default"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000062-default-mobile.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
          </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_default"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000062-default-mobile.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
          </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reward_default"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="w">
        </span><span class="p">}</span><span class="w">                
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"left"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"active_until"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-31T11:24:15.278Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/rewards/purchased</code></p>

<p>Returns list of rewards purchased by member.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>Response looks as in <a href="#v3-rewards-list">Reward list</a>, but with reward usage instead of purchasing info</p>

<h3 id="usage"><a name="v3-rewards-usage"></a> Usage</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>left</td>
<td>integer</td>
<td>(optional) How many more times the member can use the Reward. Null, when there&rsquo;s no usage limit</td>
</tr>
<tr>
<td>active_until</td>
<td>Date</td>
<td>(optional) The last time time the reward has been used at + activation time (configurable per Loyalty Club, e.x. 30s). When null, the reward has not been activated (used) yet</td>
</tr>
<tr>
<td>usable</td>
<td>boolean</td>
<td>Will the reward be still usable after activation time passes?</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Rewards:ListPurchased</code> permit
</aside>

<h2 id="purchase"><a name="v3-rewards-purchase"></a> Purchase</h2>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/rewards/153/purchase"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/rewards/:id/purchase</code></p>

<p>Adds one of available rewards to member&rsquo;s purchased list and reduces member&rsquo;s balance by price.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Reward#10000951 not found&quot;}</code></td>
<td>-</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Not enough points&quot;}</code></td>
<td>Member has no enough points to purchase the reward</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Member level is not high enough&quot;}</code></td>
<td>Member level is not high enough to purchase the reward</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Global limit exceeded&quot;}</code></td>
<td>There are no more rewards available to purchase</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Rewards:Purchase</code> permit
</aside>

<h2 id="use"><a name="v3-rewards-use"></a> Use</h2>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/members/me/rewards-program/rewards/153/use"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Authorization: Bearer 8433d608645345a45ce5a0f5ba1225e57546e86ac49e5fec842159dc82218522'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an empty object:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"left"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"usable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active_until"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-31T11:24:15.278Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/infinity-mall/members/me/rewards-program/rewards/:id/use</code></p>

<p>Uses (activates) one of usable rewards purchased by member.</p>

<p>As a member-related action, it requires member authorization. See <a href="#v3-oauth2">OAuth</a>.</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>usage</td>
<td>Object</td>
<td>See <a href="#v3-rewards-usage">Reward Usage</a></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Response body</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Reward#10000951 not found&quot;}</code></td>
<td>-</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Already active&quot;}</code></td>
<td>The reward has been just used</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;Not granted&quot;}</code></td>
<td>The reward has not been purchased by member</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td><code class="prettyprint">{&quot;error&quot;: &quot;User limit exceeded&quot;}</code></td>
<td>There are no more rewards available to purchase for the member</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Rewards:Api:OAuth:Rewards:Use</code> permit
</aside>

          <h1 id="endpoints-transactions">Endpoints &bull; Transactions</h1>

<h2 id="create"><a name="v3-transactions-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/transactions"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
         "transactions": [
             {
                 "identifier_type": "id",
                 "identifier": 123456,
                 "store_id": "store_id",
                 "event_date": "2019-02-02T18:48:47+08:00",
                 "total": 10.0,
                 "receipt_id": "receipt id",
                 "tax": 1.0,
                 "currency": "NOK",
                 "items": [
                     {
                         "id": "1",
                         "discount": 0.0,
                         "tax": 1,
                         "amount": 1,
                         "price": 5.0,
                         "main_product_category": "category name",
                         "main_product_category_id": "category id",
                         "main_product_category_number": "1",
                         "product_category": "category name",
                         "product_category_id": "category id",
                         "product_category_number": "1",
                         "description": "item description"
                     },
                     {
                         "id": "2",
                         "discount": 0.0,
                         "tax": 1.0,
                         "amount": 1,
                         "price": 5,
                         "main_product_category": "category name",
                         "main_product_category_id": "category id"
                     }
                 ],
                 "loyalty_points": 100
             }
         ]
     }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4c2b7a6-e0fb-47a3-9b5a-02d3854fcea3"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Member doesn't exist"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"transactions[1].store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This value should not be blank."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/transactions?transaction_id=43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an array of transactions objects structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receipt id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-02T02:02:02+0000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sales_person"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales person"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When payload is invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"transactions[1].store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This value should not be blank."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions</code></p>

<p>Register transactions, stamps or bonus points will be calculated based on the configured loyalty program.</p>

<h3 id="messages-post-parameters-json-array">Messages POST Parameters (JSON array)</h3>

<p>Expected payload is either object with <code class="prettyprint">transactions</code> attribute containing array of <code class="prettyprint">transaction</code> objects with attributes as described below or single <code class="prettyprint">transaction</code> object:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>identifier_type *</td>
<td>string (id, msisdn, email)</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>identifier *</td>
<td>msisdn (string), email (string), member_id (int)</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>store_id *</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>receipt_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>event_date *</td>
<td>string</td>
<td>use format with timezone</td>
<td></td>
</tr>
<tr>
<td>total *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>tax *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>items *</td>
<td>array</td>
<td>n/a</td>
<td>array of <code class="prettyprint">item</code> objects</td>
</tr>
<tr>
<td>calculate_rewards</td>
<td>bool</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Loyalty Club&rsquo;s currency</td>
<td></td>
</tr>
<tr>
<td>sales_person</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>terminal_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>store_tax_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>store_msisdn</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>loyalty_coupons</td>
<td>array of strings</td>
<td>n/a</td>
<td>list of coupons ids / codes</td>
</tr>
<tr>
<td>loyalty_giftcards</td>
<td>array of strings</td>
<td>n/a</td>
<td>list of codes</td>
</tr>
<tr>
<td>loyalty_points</td>
<td>integer</td>
<td>n/a</td>
<td></td>
</tr>
</tbody></table>

<p>* required</p>

<p><code class="prettyprint">item</code> object is a hash with following attributes:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id *</td>
<td>string</td>
<td>n/a</td>
<td>item id</td>
</tr>
<tr>
<td>price *</td>
<td>float</td>
<td>n/a</td>
<td>negative values will be treated as discounts</td>
</tr>
<tr>
<td>amount *</td>
<td>integer</td>
<td>n/a</td>
<td>negative values will be treated as refunds</td>
</tr>
<tr>
<td>discount *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>tax *</td>
<td>float</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>calculate_rewards *</td>
<td>bool</td>
<td>true</td>
<td></td>
</tr>
<tr>
<td>item_number</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>properties</td>
<td>hash key: value</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>product_category</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>product_category_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>product_category_number</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>main_product_category</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>main_product_category_id</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
<tr>
<td>main_product_category_number</td>
<td>string</td>
<td>n/a</td>
<td></td>
</tr>
</tbody></table>

<p>* required</p>

<p>Negative price and amount will result in error.</p>

<p>You can provide <code class="prettyprint">callback_url</code> in the root object. If it&rsquo;s available after processing we will send <code class="prettyprint">POST</code> request to that URL with body as below:
<code class="prettyprint">
{
    &quot;transaction_id&quot;: &quot;UUID&quot;,
    &quot;receipt_id&quot;: &quot;id&quot;,
    &quot;result&quot; =&gt; &quot;OK|error message&quot;
}
</code></p>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Message has been accepted for sending</td>
</tr>
<tr>
<td>Member doesn&rsquo;t exist</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Create</code> and <code>BL:Api:Members:Get</code> permits
</aside>

<h2 id="list"><a name="v3-transactions-list"></a> List</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/transactions?transaction_id=43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an array of transactions objects structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receipt id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"event_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-02T02:02:02+0000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sales_person"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales person"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terminal id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_tax_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store tax id"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"store_msisdn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msisdn"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When parameters are invalid (422), returns an object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"At least one value required: {{ transactionId, storeId, receiptId, memberId, salesPerson, currency }}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions</code></p>

<p>List registered transactions</p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>store_id *</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>receipt_id *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>member_id *</td>
<td>int</td>
<td></td>
</tr>
<tr>
<td>sales_person *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>currency *</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>ignore_loyalty</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>min_total_gross</td>
<td>float</td>
<td></td>
</tr>
<tr>
<td>max_total_gross</td>
<td>float</td>
<td></td>
</tr>
<tr>
<td>sort</td>
<td>string</td>
<td>field to sort by</td>
</tr>
<tr>
<td>order</td>
<td>string (ASC, DESC)</td>
<td></td>
</tr>
</tbody></table>

<p>* required at least one of starred parameters </p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Read</code> permit
</aside> 

<h2 id="get"><a name="v3-transactions-get"></a> Get</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/transactions/43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns transactions object structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43cb7852-5190-4d1d-9b1f-6d6cf552424b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"member_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456</span><span class="p">,</span><span class="w">
  </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"receipt_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"receipt id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"event_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-02T02:02:02+0000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sales_person"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sales person"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"terminal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terminal id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"store_tax_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"store tax id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"store_msisdn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msisdn"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_category_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"category id"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_category_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Category"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When <code class="prettyprint">transaction_id</code> is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transaction not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions/:id</code></p>

<p>Get transaction with items</p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Read</code> permit
</aside> 

<h2 id="get-categories"><a name="v3-transactions-categories-get"></a> Get categories</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/transactions/categories"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns categories objects structured like below:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2276bb58-45a4-4d49-b25b-896a78b06730"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"category"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13b2a321-280e-48fc-bf18-54b61dc6d577"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sub"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subcategory"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2276bb58-45a4-4d49-b25b-896a78b06730"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ID2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19c3f19c-f090-43f1-8439-824406449a2e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"item"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13b2a321-280e-48fc-bf18-54b61dc6d577"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When parameters are invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The value you selected is not a valid choice."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This value should be of type array."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions/categories</code></p>

<p>Get categories</p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string (main, sub, item)</td>
<td></td>
</tr>
<tr>
<td>parent_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>100</td>
</tr>
<tr>
<td>id</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transaction:Api:Transactions:Read</code> permit
</aside> 

          <h1 id="endpoints-points">Endpoints &bull; Points</h1>

<h2 id="create"><a name="v3-points-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/transactions/points"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'[
        {
            "amount": 10,
            "event_type": "purchase",
            "event": "used coupon",
            "event_date": "2019-07-12T15:23:21Z",
            "message": "Black Friday",
            "store_id": "12345",
            "transaction_id": "f4c2b7a6-e0fb-47a3-9b5a-02d3854fcea3",
            "wallet": "default",
            "expiry_date": "2020-02-12T15:19:21Z"
        }
    ]'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purchase"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>When request is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"[1].property"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property {property} is required"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions/points</code></p>

<p>Add or remove points from member wallets. All unasigned points belongs to default wallet</p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>identifier_type*</td>
<td>Type of identifier</td>
<td>string (id, msisdn, email)</td>
</tr>
<tr>
<td>identifier*</td>
<td>Identifier</td>
<td>msisdn (string), email (string), member_id (int)</td>
</tr>
<tr>
<td>event_type*</td>
<td>Type of event</td>
<td>string (purchase, issue, campaign, use, revoke, expire, other)</td>
</tr>
<tr>
<td>amount*</td>
<td>store name</td>
<td>int (not 0)</td>
</tr>
<tr>
<td>event</td>
<td>description of event</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>additional remarks</td>
<td>string</td>
</tr>
<tr>
<td>store_id</td>
<td>store id</td>
<td>string</td>
</tr>
<tr>
<td>transaction_id</td>
<td>DMP transaction id</td>
<td>string</td>
</tr>
<tr>
<td>wallet</td>
<td>wallet</td>
<td>string</td>
</tr>
<tr>
<td>event_date</td>
<td>date of event allow adding past events</td>
<td>datetime</td>
</tr>
<tr>
<td>expiry_date</td>
<td>Points expiry date</td>
<td>datetime</td>
</tr>
</tbody></table>

<p>Parameters with <code class="prettyprint">*</code> are required</p>

<h3 id="type-of-events">Type of events</h3>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>purchase</td>
<td>points added by making a purchase (positive amount required)</td>
</tr>
<tr>
<td>campaign</td>
<td>points added due to campaign event (positive amount required)</td>
</tr>
<tr>
<td>issue</td>
<td>points added (positive amount required)</td>
</tr>
<tr>
<td>use</td>
<td>points used by a member (reward, discount, etc) (negative amount required)</td>
</tr>
<tr>
<td>revoke</td>
<td>points removed from member account due to refund etc. (negative amount required)</td>
</tr>
<tr>
<td>expire</td>
<td>points removed due to expiration (negative amount required)</td>
</tr>
<tr>
<td>other</td>
<td></td>
</tr>
</tbody></table>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Points saved</td>
</tr>
<tr>
<td>Member does not exist</td>
<td></td>
</tr>
<tr>
<td>Store does not exists</td>
<td></td>
</tr>
<tr>
<td>Incorrect amount</td>
<td>Positive amount when using points, negative amount when issuing points etc</td>
</tr>
<tr>
<td>Not enough points in the wallet</td>
<td>Not enough points when using a points</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transactions:Api:Points:Create</code>
</aside>

<h2 id="member-points"><a name="v3-member-points"></a> Member points</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/transactions/points/by_member_id/12345"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"default_wallet"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="s2">"other_wallet"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions/points/by_member_id/:member_id</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions/points/by_msisdn/:msisdn</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/transactions/points/by_email/:email</code></p>

<p>Return number of points that member has filtered by different wallets</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>member_id</td>
<td>Member id</td>
<td>integer</td>
</tr>
<tr>
<td>msisdn</td>
<td>Member msisdn</td>
<td>string</td>
</tr>
<tr>
<td>email</td>
<td>Member email</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Transactions:Api:Points:Get</code> permit
</aside>

          <h1 id="endpoints-files">Endpoints &bull; Files</h1>

<h2 id="general-info">General info</h2>

<h3 id="file-cropping"><a name="v3-file-cropping"></a> File cropping</h3>

<blockquote>
<p><code class="prettyprint">crop_to</code> param interpretation may be visualized like this:</p>
</blockquote>
<pre class="highlight plaintext"><code>
                           x_top_left     x_bottom_right
                    |-------------------------------------
                    | ..........................
                    | ..........................
     y_top_left     | .....*---------------.....
                    | .....|..............|.....
                    | .....|..............|.....
                    | .....|..............|....
     y_bottom_right | .....---------------*.....
                    | ..........................
                    |

</code></pre>
<p>When file is uploaded and it&rsquo;s too large to match the required base size, it may get cropped.
This can be achieved by providing cropping param (<code class="prettyprint">crop_to</code>).</p>

<p>The param has following syntax: <code class="prettyprint">x_top_left,y_top_left,x_bottom_right,y_bottom_right</code> and represents boundaries of a cropping area. </p>

<p>When uploaded file is too large and <code class="prettyprint">crop_to</code> param is not provided, the file will be automatically cropped with gravity set in center of image.</p>

<h4 id="example">Example</h4>

<p>The kind&rsquo;s base size is 400x200px and the uploaded file is 1000x1000px. </p>

<p>With crop_to=&ldquo;0,250,1000,750&rdquo;, a rectangle of &ldquo;1000x500&rdquo; size will be cropped, with 250px left offset.
The file will be then also resized to 400x200.</p>

<h3 id="uploaded-instances-projections"><a name="v3-projected-file-versions"></a> Uploaded instances projections</h3>

<p>When file is uploaded, only original file is physically processed and stored. <code class="prettyprint">base</code> and other versions are processed asynchronously. 
So, the responses returned on upload contains only &ldquo;projected&rdquo; info about files.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size_type</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>An URL the file be available on <strong>after</strong> it gets processed.</td>
</tr>
<tr>
<td>min_width</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>max_width</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>min_height</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>max_height</td>
<td>integer</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get-file-schema"><a name="v3-get-file-schema"></a> Get file schema</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/files/schema"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns the schema as described <a href="#v3-file-schema">here</a></p>
</blockquote>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/files/schema</code></p>

<p>Returns the Loyalty Club file schema. See: <a href="#v3-file-schema">Files &bull; Schema</a></p>

<aside class="notice">
Requires <code>Files:Api:GetSchema</code> permit
</aside>

<h2 id="create-file"><a name="v3-create-file"></a> Create file</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/files/offers/1000289/offer_default <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'</span> <span class="se">\</span>
  -F <span class="nv">file</span><span class="o">=</span>@some_file.png <span class="se">\</span>
  -F <span class="s1">'crop_to=256,256,856,1056'</span>

</code></pre>
<blockquote>
<p>Returns info about uploaded file and it&rsquo;s projected versions</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000289-offer_default-original.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"file_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMAGE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
        </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w">
        </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"offer_default"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"projected_versions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000289-offer_default-base.png"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w">
            </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
            </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"size_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thumbnail"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://offers-api.s3.eu-central-1.amazonaws.com/offer-1000289-offer_default-thumbnail.png"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
            </span><span class="s2">"min_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
            </span><span class="s2">"max_width"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
            </span><span class="s2">"max_height"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/files/:fileable_type/:fileable_id/kind</code></p>

<p>Creates new file for given Fileable (e.g. Offer).</p>

<h3 id="url-parameters"><a name="v3-create-file-url-parameters"></a> URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fileable_type</td>
<td>enum: <code class="prettyprint">[&#39;offers&#39;, &#39;collections&#39;]</code></td>
<td></td>
</tr>
<tr>
<td>fileable_id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>kind</td>
<td>enum</td>
<td>see <a href="#v3-file-kinds">Standard file kinds</a></td>
</tr>
</tbody></table>

<h3 id="post-parameters"><a name="v3-create-file-post-parameters"></a> POST Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>file</td>
<td>binary</td>
<td>yes</td>
<td>File to upload</td>
</tr>
<tr>
<td>crop_to</td>
<td>string</td>
<td>no</td>
<td>See: <a href="#v3-file-cropping">cropping</a></td>
</tr>
</tbody></table>

<h3 id="response-json-object"><a name="v3-create-file-response"></a> Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>original</td>
<td>File</td>
<td>See <a href="#v3-file-model">File model</a></td>
</tr>
<tr>
<td>projected_versions</td>
<td>ProjectedVersion[]</td>
<td>See <a href="#v3-projected-file-versions">Projected file versions</a></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>The Fileable does not exist</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Files:Api:Create</code> permit
</aside>

<h2 id="update-file"><a name="v3-update-file"></a> Update file</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/files/offers/1000289/offer_default <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'</span> <span class="se">\</span>
  -F <span class="nv">file</span><span class="o">=</span>@some_file.png <span class="se">\</span>
  -F <span class="s1">'crop_to=256,256,856,1056'</span>

</code></pre>
<blockquote>
<p>When successful (200), Returns info about uploaded file. Same as <a href="#v3-create-file">Create file</a> example response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="s2">"Create file"</span><span class="w"> </span><span class="err">example</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/files/:fileable_type/:fileable_id/kind</code></p>

<p>Updates file for given Fileable (e.g. Offer).</p>

<h3 id="url-parameters">URL Parameters</h3>

<p>See: <a href="#v3-create-file-url-parameters">Create File URL Parameters</a></p>

<h3 id="post-parameters">POST Parameters</h3>

<p>See: <a href="#v3-create-file-post-parameters">Create File POST Parameters</a></p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>See: <a href="#v3-create-file-response">Create File Response</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Fileable not found</td>
</tr>
<tr>
<td><code class="prettyprint">404</code></td>
<td>File not found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Files:Api:Update</code> permit
</aside>

<h2 id="reprocess-file"><a name="v3-reprocess-file"></a> Reprocess file</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
  https://bpc-api.boostcom.no/v3/infinity-mall/files/offers/1000289/offer_default/reprocess <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW'</span> <span class="se">\</span>
  -F <span class="s1">'crop_to=256,256,856,1056'</span>

</code></pre>
<blockquote>
<p>When successful (200), Returns info about uploaded file. Same as <a href="#v3-create-file">Create file</a> example response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">(...)</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="s2">"Create file"</span><span class="w"> </span><span class="err">example</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/files/:fileable_type/:fileable_id/kind/reprocess</code></p>

<p>Reprocesses file for given Fileable (e.g. Offer).
It means that no file needs to be uploaded, instead the original file will be reprocessed according to given parameters. </p>

<h3 id="url-parameters">URL Parameters</h3>

<p>See: <a href="#v3-create-file-url-parameters">Create File URL Parameters</a></p>

<h3 id="post-parameters">POST Parameters</h3>

<p>See: <a href="#v3-create-file-post-parameters">Create File POST Parameters</a> - except no <code class="prettyprint">file</code> param is accepted here</p>

<h3 id="response-json-object">Response (JSON object)</h3>

<p>See: <a href="#v3-create-file-response">Create File Response</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Fileable not found</td>
</tr>
<tr>
<td><code class="prettyprint">404</code></td>
<td>File not found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Files:Api:Reprocess</code> permit
</aside>

<h2 id="delete-file"><a name="v3-delete-file"></a> Delete file</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/files/offers/1000289/offer_default </span><span class="se">\</span><span class="s2">
  -H 'Content-Type: application/json' </span><span class="se">\</span><span class="s2">
  -H 'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM' </span><span class="se">\</span><span class="s2">
  -H 'X-Product-Name: default' </span><span class="se">\</span><span class="s2">
  -H 'X-User-Agent: CURL manual test'
</span></code></pre>
<blockquote>
<p>When successful (200), returns an empty object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Empty</span><span class="w"> </span><span class="err">object</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>DELETE</strong> <code class="prettyprint">v3/:loyalty_club_slug/files/:fileable_type/:fileable_id/kind</code></p>

<p>Deletes file of given Fileable (e.g. Offer).</p>

<h3 id="url-parameters">URL Parameters</h3>

<p>See: <a href="#v3-create-file-url-parameters">Create File URL Parameters</a></p>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Reason</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Fileable not found</td>
</tr>
<tr>
<td><code class="prettyprint">404</code></td>
<td>File not found</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Files:Api:Delete</code> permit
</aside>

          <h1 id="endpoints-links">Endpoints &bull; Links</h1>

<h2 id="generate-link"><a name="v3-links-generate"></a> Generate link</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/links/offer_page/generate"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
        "link_params": {
            "offer_id": 1000487
        }
    }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a generated link</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://member.dev.bstcm.no/infinity-mall/offers/1000487"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/links/(:link_slug)/generate</code></p>

<p>Returns a link to given functionality in MPC, so it may be reached by member.</p>

<p>The returned link is generated in a &ldquo;universal&rdquo; form: it points to our Webforms, but it will be captured by mobile app if 
it&rsquo;s installed on member system.</p>

<p>A list of possible links depends on Loyalty Club configuration. 
An MPC API endpoint for returning it may be implemented in future.     </p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>link_slug</td>
<td>string</td>
<td>A slug that identifies the link to generate</td>
</tr>
</tbody></table>

<h3 id="post-parameters-json-object">POST Parameters (JSON object)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>link_params</td>
<td>Object</td>
<td>Params for link generation dependent on specific link definition</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>String</td>
<td>The generated link</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Link could not be found</td>
</tr>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters</td>
</tr>
</tbody></table>

<aside class="notice">
    Requires <code>BL:Api:Links:Generate</code> permit
</aside> 

          <h1 id="endpoints-translations">Endpoints &bull; Translations</h1>

<h2 id="list"><a name="v3-list-translations"></a> List</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://bpc-api.boostcom.no/v3/infinity-mall/translations?language=en"</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
  -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns a response structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"member_properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"E-mail"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gender"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"msisdn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msisdn"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"birthday"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Birthday"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Zip code"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"interests"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Interests"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Last name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"First name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gender.man"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Man"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gender.woman"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Woman"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bonus_points"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bonus points"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"interests.skincare"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Skincare"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"interests.baby_child"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby/Child"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"interests.good_offers"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Good offers"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"interests.travel_and_leisure"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Travel and leisure"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"interests.dietary_and_nutrition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dietary and nutrition"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"interests.health_and_pharmaceuticals"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Health and pharmaceuticals"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"consents"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"dmp_profiling"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Would you like to receive personalised offers?"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dmp_profiling.title"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dmp_profiling.no_alt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Are you sure? Ved  si nei kan mottar du ikke informasjon og tilbud i andre medier"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dmp_profiling.read_more"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Profiling is our way of personalising offers, info and discounts. Please see our Privacy Policy for more info on how we use data for profiling."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dmp_profiling.__yes__"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yes, I accept profiling to receive personalised exclusive offers, info and discounts"</span><span class="p">,</span><span class="w">        
        </span><span class="s2">"dmp_profiling.__no__"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No, I do not accept profiling to receive personalised exclusive offers, info and discounts"</span><span class="p">,</span><span class="w">                
        </span><span class="s2">"sms_marketing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Do you want to receive exclusive offers via SMS?"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sms_marketing.title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMS Marketing"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sms_marketing.no_alt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? Are you sure? "</span><span class="p">,</span><span class="w">        
        </span><span class="s2">"sms_marketing.read_more"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">                
        </span><span class="s2">"sms_marketing.__yes__"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yes, I want to receive exclusive offers via SMS."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sms_marketing.__no__"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No, I don't want to receive exclusive offers."</span><span class="p">,</span><span class="w">        
        </span><span class="s2">"email_marketing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Do you want to receive exclusive offers via email? "</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email_marketing.title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email Marketing"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email_marketing.no_alt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Are you sure? Ved  si nei kan mottar du ikke informasjon og tilbud i andre medier"</span><span class="p">,</span><span class="w">        
        </span><span class="s2">"email_marketing.__yes__"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yes"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email_marketing.__no__"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No, I don't want to receive exclusive offers."</span><span class="p">,</span><span class="w">        
        </span><span class="s2">"email_marketing.read_more"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"doggo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dog"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"piggo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pig"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;p&gt;&lt;h3&gt;Privacy Policy&lt;/h3&gt;We strive to protect your privacy&lt;/p&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/translations</code></p>

<p>Returns translations for the Loyalty Club.</p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>String</td>
<td>(default language configured for Loyalty Club)</td>
<td>Desired language of translations</td>
</tr>
</tbody></table>

<h3 id="response-json-object">Response (JSON object)</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>member_properties</td>
<td>Object</td>
<td>no (may be empty)</td>
<td>Translations of member properties</td>
</tr>
<tr>
<td>consents</td>
<td>Object</td>
<td>no (may be empty)</td>
<td>Translations of member consents</td>
</tr>
<tr>
<td>tags</td>
<td>Object</td>
<td>no (may be empty)</td>
<td>Translations of Loyalty Club tags</td>
</tr>
<tr>
<td>terms</td>
<td>string</td>
<td>yes</td>
<td>Translation of Loyalty Club terms</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Translations:Api:Index</code> permit
</aside>

          <h1 id="endpoints-stores">Endpoints &bull; Stores</h1>

<h2 id="list"><a name="v3-store-list"></a> List</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores?department_id=123&amp;category=cat&amp;limit=100&amp;sort=name&amp;order=asc"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an array of store objects structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
        </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
        </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"department_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"location"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores</code></p>

<p>List of all active stores</p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>department_id</td>
<td>department id</td>
<td>integer</td>
</tr>
<tr>
<td>category</td>
<td>category</td>
<td>string</td>
</tr>
<tr>
<td>limit</td>
<td>max number of results</td>
<td>integer</td>
</tr>
<tr>
<td>sort</td>
<td>field to sort by (name,id,store_id)</td>
<td>string</td>
</tr>
<tr>
<td>order</td>
<td>order (asc,desc)</td>
<td>string</td>
</tr>
</tbody></table>

<p>All parameters are optional</p>

<aside class="notice">
Requires <code>Stores:Api:Stores:Get</code> permit
</aside> 

<h2 id="get"><a name="v3-store-get"></a> Get</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/123456"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns department object structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"department_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"location"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When <code class="prettyprint">id</code> is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/:id</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/by_store_id/:store_id</code></p>

<p>Return store by one of two identifiers: <code class="prettyprint">id</code> or <code class="prettyprint">store_id</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ID internal</td>
<td>integer</td>
</tr>
<tr>
<td>store_id</td>
<td>Store id from customer system</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Stores:Api:Stores:Get</code> permit
</aside>

<h2 id="create"><a name="v3-store-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
        "name": "store name",
        "store_id": "6789",
        "department_id": 12345,
        "categories": ["category"],
        "location": "location"
    }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
    </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When request is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property {property} is required"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Create store</p>

<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores</code></p>

<p>Create store</p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>store_id*</td>
<td>store id</td>
<td>string</td>
</tr>
<tr>
<td>name*</td>
<td>store name</td>
<td>string</td>
</tr>
<tr>
<td>department_id</td>
<td>department/mall id</td>
<td>string</td>
</tr>
<tr>
<td>category</td>
<td>categories</td>
<td>array</td>
</tr>
<tr>
<td>location</td>
<td>location</td>
<td>string</td>
</tr>
</tbody></table>

<p>Parameters with <code class="prettyprint">*</code> are required</p>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Store was created</td>
</tr>
<tr>
<td>Store with this id already exists.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Stores:Api:Stores:Create</code>
</aside>

<h2 id="update"><a name="v3-store-update"></a> Update</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/12345"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
        "name": "store name",
        "department_id": 12345,
        "categories": ["category"],
        "location": "location"
    }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
    </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6789"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When request is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property {property} is required"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When <code class="prettyprint">id</code> or <code class="prettyprint">store_id</code> is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Update store</p>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/:id</code></p>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/by_store_id/:store_id</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ID</td>
<td>integer</td>
</tr>
<tr>
<td>store_id</td>
<td>store id</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="put-parameters-json">PUT Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>name*</td>
<td>store name</td>
<td>string</td>
</tr>
<tr>
<td>department_id</td>
<td>department/mall id</td>
<td>string</td>
</tr>
<tr>
<td>category</td>
<td>categories</td>
<td>array</td>
</tr>
<tr>
<td>location</td>
<td>location</td>
<td>string</td>
</tr>
</tbody></table>

<p>Parameters with <code class="prettyprint">*</code> are required</p>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Store updated</td>
</tr>
<tr>
<td>Store with this id does not exist.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Stores:Api:Stores:Update</code>
</aside>

<h2 id="delete"><a name="v3-store-delete"></a> Delete</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/12345"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1113</span><span class="p">,</span><span class="w">
    </span><span class="s2">"store_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When <code class="prettyprint">id</code> or <code class="prettyprint">store_id</code> is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete store</p>

<p><strong>DELETE</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/:id</code></p>

<p><strong>DELETE</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/by_store_id/:store_id</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ID</td>
<td>integer</td>
</tr>
<tr>
<td>store_id</td>
<td>store id</td>
<td>string</td>
</tr>
</tbody></table>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Store was deleted</td>
</tr>
<tr>
<td>Store with this id does not exist.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Stores:Api:Stores:Delete</code>
</aside>

<h2 id="categories"><a name="v3-store-categories-list"></a> Categories</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/categories"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an array of store objects structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"category A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category B"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category C"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/categories</code></p>

<p>List of all store categories</p>

<aside class="notice">
Requires <code>Stores:Api:Categories:Get</code> permit
</aside> 

          <h1 id="endpoints-departments">Endpoints &bull; Departments</h1>

<h2 id="list"><a name="v3-department-list"></a> List</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/departments"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns an array of department objects structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
      </span><span class="s2">"department_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">67890</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Department/Mall name"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/departments</code></p>

<p>List customer departments</p>

<aside class="notice">
Requires <code>Stores:Api:Departments:Get</code> permit
</aside> 

<h2 id="get"><a name="v3-department-get"></a> Get</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/departments/123456"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns department object structured like below. Some values may be omitted if were not provided:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
  </span><span class="s2">"department_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">67890</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Department/Mall name"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When <code class="prettyprint">id</code> is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Department/Mall not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/departments/:id</code></p>

<p><strong>GET</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/departments/by_department_id/:department_id</code></p>

<p>Return department by one of two identifiers: <code class="prettyprint">id</code> or <code class="prettyprint">department_id</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ID internal</td>
<td>integer</td>
</tr>
<tr>
<td>department_id</td>
<td>Department id from customer system</td>
<td>integer</td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Stores:Api:Departments:Get</code> permit
</aside>

<h2 id="create"><a name="v3-department-create"></a> Create</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/departments"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
        "name": "department name",
        "department_id": 12345
    }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
    </span><span class="s2">"department_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6789</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When request is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property {property} is required"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Create store</p>

<p><strong>POST</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/departments</code></p>

<p>Create store</p>

<h3 id="post-parameters-json">POST Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>name*</td>
<td>department name</td>
<td>string</td>
</tr>
<tr>
<td>department_id*</td>
<td>department/mall id</td>
<td>integer</td>
</tr>
</tbody></table>

<p>Parameters with <code class="prettyprint">*</code> are required</p>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Department was created</td>
</tr>
<tr>
<td>Department with this id already exists.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Stores:Api:Departments:Create</code>
</aside>

<h2 id="update"><a name="v3-department-update"></a> Update</h2>

<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://bpc-api.boostcom.no/v3/:loyalty_club_slug/stores/departments/12345"</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Client-Authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
    -H <span class="s1">'X-Product-Name: default'</span> <span class="se">\</span>
    -H <span class="s1">'X-User-Agent: CURL manual test'</span>
    -d <span class="se">\</span>
    <span class="s1">'{
        "name": "department name"
    }'</span>
</code></pre>
<blockquote>
<p>When successful (200), returns a feedback object structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w">
    </span><span class="s2">"department_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6789</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When request is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid format"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The property {property} is required"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>When <code class="prettyprint">id</code> or <code class="prettyprint">department_id</code> is invalid (422), returns:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Department not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Update department</p>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/departments/:id</code></p>

<p><strong>PUT</strong> <code class="prettyprint">v3/:loyalty_club_slug/stores/departments/by_department_id/:department_id</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ID</td>
<td>integer</td>
</tr>
<tr>
<td>department_id</td>
<td>department id</td>
<td>integer</td>
</tr>
</tbody></table>

<h3 id="put-parameters-json">PUT Parameters (JSON)</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>name*</td>
<td>department name</td>
<td>string</td>
</tr>
</tbody></table>

<p>Parameters with <code class="prettyprint">*</code> are required</p>

<h3 id="feedback-statuses">Feedback statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>Department updated</td>
</tr>
<tr>
<td>Department with this id does not exist.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="error-responses">Error responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">422</code></td>
<td>Invalid parameters (see example on the right)</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Stores:Api:Departments:Update</code>
</aside> 

          <h1 id="changelog">Changelog</h1>

<h3 id="11-12-2019-piotr-witlicki">11.12.2019 | Piotr witlicki</h3>

<ul>
<li>Update <a href="#v3-offers-display-schemas">Offers &bull; Display schemas</a> to have <a href="https://support.smartbear.com/readyapi/docs/testing/jsonpath-reference.html">JSONPath</a> references</li>
</ul>

<h3 id="05-12-2019-piotr-witlicki">05.12.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-links-generate">Links &bull; Generate</a> </li>
</ul>

<h3 id="22-11-2019-piotr-witlicki">22.11.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-loyalty-clubs-get">Loyalty Clubs &bull; Get</a></li>
<li>Add info about new <code class="prettyprint">client</code> <a href="#v3-offers-display-schemas">display schema</a> item type </li>
</ul>

<h3 id="22-10-2019-piotr-witlicki">22.10.2019 | Piotr witlicki</h3>

<ul>
<li>Add <code class="prettyprint">collection_position</code> order_by key to <a href="#v3-list-offers">Offers &bull; List offers</a></li>
</ul>

<h3 id="18-10-2019-piotr-witlicki">18.10.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-offers-display-schemas">Offer display schemas</a></li>
</ul>

<h3 id="16-10-2019-natalia-styrska">16.10.2019 | Natalia Styrska</h3>

<ul>
<li>Add (<a href="#v3-store-categories-list">Stores &bull; Categories</a>) endpoint</li>
<li>Add (<a href="#v3-department-create">Departments &bull; Create</a>) endpoint</li>
<li>Add (<a href="#v3-department-update">Departments &bull; Update</a>) endpoint</li>
</ul>

<h3 id="23-09-2019-piotr-witlicki">23.09.2019 | Piotr witlicki</h3>

<ul>
<li>Add <code class="prettyprint">event_occurred_at</code> param to <a href="#v3-member-event-occured-at-param">Members &bull; Update</a> </li>
</ul>

<h3 id="21-09-2019-piotr-witlicki">21.09.2019 | Piotr witlicki</h3>

<ul>
<li>Add <code class="prettyprint">membership_started_at</code> to <a href="#v3-rewards-program-status">Rewards Program &bull; Get Status</a> </li>
</ul>

<h3 id="19-09-2019-natalia-styrska">19.09.2019 | Natalia Styrska</h3>

<ul>
<li>Add (<a href="#v3-member-points">Points &bull; Member points</a>) endpoint</li>
<li>Add (<a href="#v3-points-create">Points &bull; Create</a>) endpoint</li>
</ul>

<h3 id="02-09-2019-natalia-styrska">02.09.2019 | Natalia Styrska</h3>

<ul>
<li>Change (<a href="#v3-store-list">Stores &bull; List</a>) rename malls to departments</li>
<li>Change (<a href="#v3-store-get">Stores &bull; Get</a>) rename malls to departments</li>
<li>Change (<a href="#v3-store-create">Stores &bull; Create</a>) rename malls to departments</li>
<li>Change (<a href="#v3-store-update">Stores &bull; Update</a>) rename malls to departments</li>
<li>Add (<a href="#v3-department-list">Departments &bull; List</a>) rename malls to departments</li>
<li>Add (<a href="#v3-department-get">Departments &bull; Get</a>) rename malls to departments</li>
</ul>

<h3 id="29-08-2019-piotr-witlicki">29.08.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-members-update-app-token">Members &bull; Update app token</a> endpoint</li>
<li>Add <a href="#v3-me-update-app-token">OAuth &bull; Update app token</a> endpoint</li>
</ul>

<h3 id="27-08-2019-piotr-witlicki">27.08.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-offers-events">Offers Events</a> section</li>
</ul>

<h3 id="23-08-2019-piotr-witlicki">23.08.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-members-validate">Members &bull; Validate</a> endpoint</li>
<li>Change <a href="#v3-offers-list">Offers &bull; List</a> to accept <code class="prettyprint">include_pagination_info</code> instead of <code class="prettyprint">include_total</code> param</li>
</ul>

<h3 id="19-08-2019-piotr-witlicki">19.08.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-reprocess-file">Offers &bull; Reprocess</a></li>
<li>Add <a href="#v3-offers-list-order-by"><code class="prettyprint">order_by</code> param</a> to Offers List</li>
</ul>

<h3 id="09-08-2019-piotr-witlicki">09.08.2019 | Piotr witlicki</h3>

<ul>
<li>Add <a href="#v3-offers-admin">Offers Admin</a> section</li>
<li>Add <a href="#v3-create-file">Files &bull; Create</a></li>
<li>Add <a href="#v3-update-file">Files &bull; Update</a></li>
<li>Add <a href="#v3-delete-file">Files &bull; Delete</a></li>
</ul>

<h3 id="08-08-2019-natalia-styrska">08.08.2019 | Natalia Styrska</h3>

<p>Stores</p>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/stores</code> (<a href="#v3-store-list">Stores &bull; List</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/stores/:id</code> (<a href="#v3-store-get">Stores &bull; Get</a>)</li>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/stores</code> (<a href="#v3-store-create">Stores &bull; Create</a>)</li>
<li>Add <code class="prettyprint">PUT /v3/:loyalty_club_slug/stores</code> (<a href="#v3-store-update">Stores &bull; Update</a>)</li>
<li>Add <code class="prettyprint">DELETE /v3/:loyalty_club_slug/stores</code> (<a href="#v3-store-delete">Stores &bull; Delete</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/stores/malls</code> (<a href="#v3-mall-list">Malls &bull; List</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/stores/malls/:id</code> (<a href="#v3-mall-get">Malls &bull; Get</a>)</li>
</ul>

<h3 id="27-06-2019-piotr-witlicki">27.06.2019 | Piotr witlicki</h3>

<ul>
<li>Introduce <a href="#v3-rewards-program-levels-program">Levels</a> </li>
</ul>

<h3 id="13-05-2019-piotr-witlicki">13.05.2019 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/translations</code> (<a href="#v3-list-translations">Translations &bull; List</a>)</li>
</ul>

<h3 id="06-05-2019-piotr-witlicki">06.05.2019 | Piotr witlicki:</h3>

<p>Offers</p>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/me/offers/meta</code> (<a href="#v3-offers-meta">Offers &bull; Get offers meta</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/me/offers/:id</code> (<a href="#v3-get-offer">Offers &bull; Get offer</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/me/offers</code> (<a href="#v3-list-offers">Offers &bull; List offers</a>)</li>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/members/me/offers/:id/use</code> (<a href="#v3-use-offer">Offers &bull; Use offer</a>)</li>
<li>Add <code class="prettyprint">PUT /v3/:loyalty_club_slug/members/me/offers/:id/like</code> (<a href="#v3-like-offer">Offers &bull; Like offer</a>)</li>
<li>Add <code class="prettyprint">PUT /v3/:loyalty_club_slug/members/me/offers/:id/unlike</code> (<a href="#v3-unlike-offer">Offers &bull; Unlike offer</a>)</li>
</ul>

<h3 id="16-04-2019-piotr-witlicki">16.04.2019 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">X-Usage-Token</code> header to <a href="#v3-rewards-use">Rewards &bull; Use</a></li>
</ul>

<h3 id="07-03-2019-piotr-witlicki">07.03.2019 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/rewards-program/status/achievements_summary</code> (<a href="#v3-rewards-program-achievements-summary">Rewards Program &bull; Achievements summary</a>)</li>
</ul>

<h3 id="06-03-2019-piotr-witlicki">06.03.2019 | Piotr witlicki:</h3>

<ul>
<li>Add file schema info (<a href="#v3-file-schema">General info&bull; Files schema</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/files/schema</code> (<a href="#v3-get-file-schema">Files&bull; Get schema</a>)</li>
</ul>

<h3 id="27-02-2019-jakub-kruczek">27.02.2019 | Jakub Kruczek:</h3>

<ul>
<li>Extend consent definitions example (<a href="#v3-loyalty-clubs-schema">Loyalty Clubs &bull; Get schema</a>)</li>
</ul>

<h3 id="27-02-2019-adam-ku">27.02.2019 | Adam Ku:</h3>

<ul>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/transactions</code> (<a href="#v3-transactions-create">Transactions &bull; Create</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/transactions</code> (<a href="#v3-transactions-list">Transactions &bull; List</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/transactions/:id</code> (<a href="#v3-transactions-get">Transactions &bull; Get</a>)</li>
</ul>

<h3 id="19-02-2019-piotr-witlicki">19.02.2019 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/:id/rewards-program/status</code> (<a href="#v3-rewards-program-status-by-member-id">Rewards Program &bull; Get status by member ID</a>)</li>
</ul>

<h3 id="08-02-2019-piotr-witlicki">08.02.2019 | Piotr witlicki:</h3>

<p>Boostcom Rewards draft</p>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/rewards-program/info</code> (<a href="#v3-rewards-program-info">Rewards Program &bull; Get Info</a>)</li>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/members/me/rewards-program/join</code> (<a href="#v3-rewards-program-join">Rewards Program &bull; Join</a>)</li>
<li>Add <code class="prettyprint">DELETE /v3/:loyalty_club_slug/members/me/rewards-program/leave</code> (<a href="#v3-rewards-program-leave">Rewards Program &bull; Leave</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/me/rewards-program/status</code> (<a href="#v3-rewards-program-status">Rewards Program &bull; Get status</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/me/rewards-program/rewards</code> (<a href="#v3-rewards-list">Rewards &bull; List</a>)</li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/me/rewards-program/rewards/purchased</code> (<a href="#v3-rewards-list-purchased">Rewards &bull; List purchased</a>)</li>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/members/me/rewards-program/rewards/:id/purchase</code> (<a href="#v3-rewards-purchase">Rewards &bull; Purchase</a>)</li>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/members/me/rewards-program/rewards/:id/use</code> (<a href="#v3-rewards-use">Rewards &bull; Use</a>)</li>
</ul>

<h3 id="07-02-2019-dominik-halat">07.02.2019 | Dominik Halat:</h3>

<ul>
<li>Remove <code class="prettyprint">shortening_enabled</code> param from Emails API (<a href="#v3-emails-create">Emails &bull; Create</a>)</li>
</ul>

<h3 id="07-02-2019-piotr-witlicki">07.02.2019 | Piotr witlicki:</h3>

<ul>
<li>Replace paths: <code class="prettyprint">/v3/loyalty_clubs/:loyalty_club_slug/</code> with <code class="prettyprint">/v3/:loyalty_clubs/</code> (old ones will still work)</li>
</ul>

<h3 id="25-01-2019-dominik-halat">25.01.2019 | Dominik Halat:</h3>

<ul>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/emails</code> (<a href="#v3-emails-create">Emails &bull; Create</a>)</li>
<li>Add <code class="prettyprint">db_and_cache</code> response type for Member#person_id (<a href="#v3-members-person-id">Get person id</a>)</li>
</ul>

<h3 id="14-12-2018-jakub-kruczek">14.12.2018 | Jakub Kruczek:</h3>

<ul>
<li>Add <code class="prettyprint">updated_at</code> to consents value on member</li>
</ul>

<h3 id="04-12-2018-piotr-witlicki">04.12.2018 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">language</code> param to <code class="prettyprint">/v3/:loyalty_club_slug/members/by_msisdn/:msisdn/send_registration_password</code></li>
</ul>

<h3 id="13-11-2018-piotr-witlicki">13.11.2018 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">PUT /v3/:loyalty_club_slug/members/channels/msisdn/:msisdn/send_verification</code>(<a href="#v3-members-send-verification-sms">Members &bull; Send MSISDN verification SMS</a>)</li>
<li>Add <code class="prettyprint">PUT /v3/:loyalty_club_slug/members/channels/msisdn/:msisdn/verify</code> (<a href="#v3-members-verify-msisdn">Members &bull; Verify MSISDN</a>)</li>
</ul>

<h3 id="08-11-2018-piotr-witlicki">08.11.2018 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/smses</code> (<a href="#v3-smses-create">SMSes &bull; Create</a>)</li>
</ul>

<h3 id="12-10-2018-piotr-witlicki">12.10.2018 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members/imports/:import_id/bulks//by_request_number/:request_number</code></li>
</ul>

<h3 id="03-08-2018-piotr-witlicki">03.08.2018 | Piotr witlicki:</h3>

<ul>
<li>Add <a href="#v3-members-imports-import-flow">Members Import</a></li>
</ul>

<h3 id="27-04-2018-piotr-witlicki">27.04.2018 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/members/by_email/:email/send_one_time_password</code> (<a href="#v3-members-send-one-time-password-email">Members &bull; Send one time password E-mail</a>)</li>
</ul>

<h3 id="27-04-2018-piotr-witlicki">27.04.2018 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">channel</code> and <code class="prettyprint">subchannel</code> attributes to <code class="prettyprint">Member</code></li>
<li>Add <code class="prettyprint">validate_partially</code> param in (<a href="v3-members-update">Members &bull; Update</a> and (<a href="#v3-me-update">Me &bull; Update</a></li>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/products</code> (<a href="#v3-loyalty-clubs-products">Loyalty Clubs &bull; List Products</a>)</li>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/push_notifications</code> (<a href="#v3-push-notification-create">Push Notifications &bull; Create</a>)</li>
</ul>

<h3 id="11-04-2018-dominik-halat">11.04.2018 | Dominik Halat</h3>

<ul>
<li>Add <code class="prettyprint">person_id</code> to <code class="prettyprint">Member</code></li>
<li>Add new endpoint <code class="prettyprint">GET /v3/:loyalty_club_slug/members/person_id</code> (<a href="#v3-members-index">Members &bull; List</a>)</li>
</ul>

<h3 id="01-02-2017-piotr-witlicki">01.02.2017 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">ids</code> query param to <code class="prettyprint">GET /v3/:loyalty_club_slug/members</code> (<a href="#v3-members-index">Members &bull; List</a>)</li>
</ul>

<h3 id="29-01-2017-piotr-witlicki">29.01.2017 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">GET /v3/:loyalty_club_slug/members</code> (<a href="#v3-members-index">Members &bull; List</a>)</li>
</ul>

<h3 id="22-01-2017-jakub-kruczek">22.01.2017 | Jakub Kruczek:</h3>

<ul>
<li>Update staging domain to: <code class="prettyprint">https://bpc-api.dev.boostcom.no/</code></li>
</ul>

<h3 id="9-01-2017-piotr-witlicki">9.01.2017 | Piotr witlicki:</h3>

<ul>
<li>Update staging domain to: <code class="prettyprint">https://bl-api.bl-stg.boostcom.cc/</code></li>
</ul>

<h3 id="4-01-2017-jakub-kruczek">4.01.2017 | Jakub Kruczek:</h3>

<ul>
<li>Add <code class="prettyprint">consents</code> fields to schema and Member payload</li>
</ul>

<h3 id="15-12-2017-piotr-witlicki">15.12.2017 | Piotr witlicki:</h3>

<ul>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/members/by_msisdn/:msisdn/send_registration_password</code></li>
<li>Add information about <code class="prettyprint">registration_password</code> in <a href="#v3-members-create">Members &bull; Create</a></li>
<li>Add some other minor fixes</li>
</ul>

<h3 id="10-11-2017-piotr-witlicki">10.11.2017 | Piotr witlicki:</h3>

<ul>
<li>Restructurize the docs</li>
<li>Add <code class="prettyprint">POST /v3/:loyalty_club_slug/members/by_msisdn/:msisdn/send_one_time_password</code></li>
</ul>

<h3 id="27-10-2017-piotr-witlicki">27.10.2017 | Piotr witlicki:</h3>

<ul>
<li>Rename <code class="prettyprint">/check_existance</code> endpoints to <code class="prettyprint">/public_info</code></li>
<li>Add :can_login attribute to <code class="prettyprint">/public_info</code> response</li>
<li>Remove :exists attribute from <code class="prettyprint">/public_info</code> response and make it to return nil when member does not exist</li>
</ul>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
