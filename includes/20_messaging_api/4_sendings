<h2 id='a-name-messaging-sendings-a-sendings-1'><span id=a-name-messaging-sendings-a-sendings></span><a name="messaging-sendings"></a> Sendings</h2><h3 id='a-name-messaging-get-sending-a-get-sending-1'><span id=a-name-messaging-get-sending-a-get-sending></span><a name="messaging-get-sending"></a> Get Sending</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/messages/sendings/32"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns object containing the requested <a href="#messaging-sending-model">sending</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"sending"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Sending</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Sending</span><span class="w"> </span><span class="err">model'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v1/messages/sendings/:id</code></p>

<p>Returns <a href="#messaging-sending-model">Sending</a>.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Sending ID</td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>404</code></td>
<td>Sending not found</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Messages:Api:Sendings:Get</code> permit
</aside>
<h3 id='a-name-messaging-list-sending-dispatches-a-list-sending-dispatches-1'><span id=a-name-messaging-list-sending-dispatches-a-list-sending-dispatches></span><a name="messaging-list-sending-dispatches"></a> List Sending Dispatches</h3>
<blockquote>
<p>Example</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/messages/sendings/32/dispatches"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>Returns object containing <a href="#messaging-dispatch-model">dispatches</a> and <a href="#pagination-model">pagination_info</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"dispatches"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">List</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Dispatch</span><span class="w"> </span><span class="err">model'</span><span class="w">
  </span><span class="s2">"pagination_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Pagination</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Pagination</span><span class="w"> </span><span class="err">info'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>GET</strong> <code>v1/messages/sendings/:id</code></p>

<p>Returns <a href="#messaging-dispatch-model">Dispatches</a> created for Sending.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Sending ID</td>
</tr>
</tbody></table>
<h4 id='query-parameters-1'><span id=query-parameters></span>Query Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>per_page</td>
<td>integer</td>
<td>100</td>
<td>Number of results to be returned per request (100 is the maximum)</td>
</tr>
<tr>
<td>page_no</td>
<td>integer</td>
<td>1</td>
<td>Number of results page</td>
</tr>
<tr>
<td>transmission_status</td>
<td>enum</td>
<td>null</td>
<td>When present, returns only Messages having given <a href="#messaging-dispatch-model">transmission_status</a></td>
</tr>
<tr>
<td>delivery_status</td>
<td>enum</td>
<td>null</td>
<td>When present, returns only Dispatches with given <a href="#messaging-dispatch-model">delivery_status</a></td>
</tr>
<tr>
<td>member_id</td>
<td>integer</td>
<td>null</td>
<td>When present, returns only Dispatches sent to recipient identified by given id</td>
</tr>
<tr>
<td>msisdn</td>
<td>string</td>
<td>null</td>
<td>When present, returns only Dispatches sent to recipient identified by given msisdn</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>null</td>
<td>When present, returns only Dispatches sent to recipient identified by given email</td>
</tr>
<tr>
<td>app_token</td>
<td>string</td>
<td>null</td>
<td>When present, returns only Dispatches sent to recipient identified by given app_token</td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>404</code></td>
<td>Sending not found</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Messages:Api:Dispatches:List</code> permit
</aside>
<h3 id='a-name-messaging-create-sending-a-create-sending-1'><span id=a-name-messaging-create-sending-a-create-sending></span><a name="messaging-create-sending"></a> Create Sending</h3>
<blockquote>
<p>Example - creates a Sending scheduled immediately, sent to given audience and one inline recipient.</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/messages/42/sendings"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'
    {
      "sending": {
        "schedule": { "type": "immediate" },
        "audience": {
          "type": "inline",
          "id": 150
        },
        "recipients": [
          { "member_id": 150, "properties": { "first_name": "Piotr" } }
        ]
      }
    }
  '</span>
</code></pre>
<blockquote>
<p>When successful, returns object containing created <a href="#messaging-sending-model">sending</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"sending"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Sending</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Sending</span><span class="w"> </span><span class="err">model'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>POST</strong> <code>v1/messages/:message_id/sendings</code></p>

<p>Creates (and schedules if demanded) Sending for given Message.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>message_id</td>
<td>integer</td>
<td>Message ID</td>
</tr>
</tbody></table>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sending</td>
<td>SendingPayload</td>
<td>See: <a href="#messaging-sending-payload-model">SendingPayload model</a></td>
</tr>
</tbody></table>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sending</td>
<td>Sending</td>
<td>See: <a href="#messaging-sending-model">Sending model</a></td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>403</code></td>
<td>Unauthorized to set Sending priority</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Message not found</td>
</tr>
<tr>
<td><code>422</code></td>
<td>Invalid parameters - see <a href="#invalid-parameters-errors-model">Invalid parameters errors model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Messages:Api:Sendings:Create</code> permit
</aside>
<h3 id='a-name-messaging-update-sending-a-update-sending-1'><span id=a-name-messaging-update-sending-a-update-sending></span><a name="messaging-update-sending"></a> Update Sending</h3>
<blockquote>
<p>Example - updates the Sending - it&#39;s unscheduled and audience is removed</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/messages/sendings/42"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span> <span class="se">\</span>
  -d <span class="s1">'
    {
      "sending": {
        "schedule": nil,
        "audience": nil
      }
    }
  '</span>
</code></pre>
<blockquote>
<p>When successful, returns object containing updated <a href="#messaging-sending-model">sending</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"sending"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Sending</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Sending</span><span class="w"> </span><span class="err">model'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code>v1/messages/sendings/:id</code></p>

<p>Updates Sending attributes.</p>

<p>The update is partial - only attributes present in the payload are updated.
If attribute removal is intended, it should be provided with <code>null</code> value.</p>
<h5 id='updating-recipients-1'><span id=updating-recipients></span>Updating recipients</h5>
<p>If <code>recipients</code> are given, the Sending Recipients are replaced with given ones.
When the array is empty, all Recipients are removed from Sending.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Sending ID</td>
</tr>
</tbody></table>
<h4 id='post-parameters-json-1'><span id=post-parameters-json></span>POST Parameters (JSON)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sending</td>
<td>SendingPayload</td>
<td>See: <a href="#messaging-sending-payload-model">SendingPayload model</a></td>
</tr>
</tbody></table>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sending</td>
<td>Sending</td>
<td>See: <a href="#messaging-sending-model">Sending model</a></td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>403</code></td>
<td>Unauthorized to set Sending priority</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Sending not found</td>
</tr>
<tr>
<td><code>405</code></td>
<td>Sending is not editable - execution process has started or finished</td>
</tr>
<tr>
<td><code>422</code></td>
<td>Invalid parameters - see <a href="#invalid-parameters-errors-model">Invalid parameters errors model</a></td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Messages:Api:Sendings:Update</code> permit
</aside>
<h3 id='a-name-messaging-cancel-sending-a-cancel-sending-1'><span id=a-name-messaging-cancel-sending-a-cancel-sending></span><a name="messaging-cancel-sending"></a> Cancel Sending</h3>
<blockquote>
<p>Example - cancels the Sending execution</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT <span class="se">\</span>
<span class="s2">"https://api.mpc.placewise.com/v1/messages/sendings/42/cancel"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'x-loyalty-club-slug: infinity-mall'</span> <span class="se">\</span>
  -H <span class="s1">'x-client-authorization: B7t9U9tsoWsGhrv2ouUoSqpM'</span> <span class="se">\</span>
  -H <span class="s1">'x-product-name: default'</span> <span class="se">\</span>
  -H <span class="s1">'x-user-agent: CURL manual test'</span>
</code></pre>
<blockquote>
<p>When successful, returns object containing cancelled <a href="#messaging-sending-model">sending</a></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"sending"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">Sending</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">see</span><span class="w"> </span><span class="err">'Sending</span><span class="w"> </span><span class="err">model'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>PUT</strong> <code>v1/messages/sendings/:id</code></p>

<p>Cancels Sending execution process. See <a href="#messaging-sending-status">Sending status</a>.</p>
<h4 id='url-parameters-1'><span id=url-parameters></span>URL Parameters</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Sending ID</td>
</tr>
</tbody></table>
<h4 id='response-json-object-1'><span id=response-json-object></span>Response (JSON object)</h4>
<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sending</td>
<td>Sending</td>
<td>See: <a href="#messaging-sending-model">Sending model</a></td>
</tr>
</tbody></table>
<h4 id='error-responses-1'><span id=error-responses></span>Error responses</h4>
<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>404</code></td>
<td>Sending not found</td>
</tr>
<tr>
<td><code>405</code></td>
<td>Sending is not cancellable - execution is not in progress</td>
</tr>
</tbody></table>

<aside class="notice">
Requires <code>Messages:Api:Sendings:Update</code> permit
</aside>
